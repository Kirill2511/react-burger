{"version":3,"sources":["components/app/app.module.css","components/burger-constructor/burger-constructor-item/burger-constructor-item.module.css","components/ingredient-details/ingredient-details-item/ingredient-details-item.module.css","components/modal-overlay/modal-overlay.module.css","components/order-details/order-details.module.css","components/orders/orders.module.css","pages/page-feed-orders/page-feed-orders.module.css","components/orders-feed/orders-feed.module.css","components/burger-ingredients/burger-ingredients.module.css","components/orders-card-details/orders-card-details.module.css","redux/types/data.ts","redux/types/menu.ts","pages/page-404/page-404.tsx","utils/hooks.ts","utils/utils.ts","components/orders-card-details/orders-card-details.tsx","redux/action-types/constructorActionsTypes.ts","redux/action-types/ingredientsActionsTypes.ts","redux/action-types/orderActionsTypes.ts","redux/action-types/signActionsTypes.ts","redux/action-types/viewedItemActionsTypes.ts","redux/action-types/viewedOrderActionsTypes.ts","redux/action-types/wsAllActionsTypes.ts","redux/action-types/wsSignActionsTypes.ts","redux/actions/constructorActions.ts","utils/constants.ts","utils/api.ts","images/icon-burger.svg","utils/mock/data-mock-empty.ts","redux/actions/ingredientsActions.ts","utils/token.ts","redux/actions/orderActions.ts","redux/actions/signActions.ts","redux/actions/viewedOrderActions.ts","pages/page-feed-card/page-feed-card.tsx","utils/data/data-menu.ts","components/app-header/menu-item/menu-item.tsx","components/app-header/app-header.tsx","components/burger-constructor/burger-constructor-item/burger-constructor-item.tsx","components/burger-constructor/burger-constructor-item-swap/burger-constructor-item-swap.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-ingredients/burger-ingredient/burger-ingredient.tsx","components/burger-ingredients/burger-ingredients.tsx","components/ingredient-details/ingredient-details-item/ingredient-details-item.tsx","components/ingredient-details/ingredient-details.tsx","redux/actions/viewedItemActions.ts","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/order-done.svg","images/spin-white.svg","components/order-details/order-details.tsx","images/icon-info.svg","components/order-failed/order-failed.tsx","redux/middleware/socketMiddleware.ts","components/orders-card/orders-card.tsx","components/orders/orders.tsx","redux/actions/wsSignActions.ts","components/protected-route/protected-route.tsx","components/sign-forgot-password/sign-forgot-password.tsx","components/sign-login/sign-login.tsx","components/sign-profile/sign-profile.tsx","components/sign-profile-nav/sign-profile-nav.tsx","components/sign-register/sign-register.tsx","components/sign-reset-password/sign-reset-password.tsx","components/sign-route/sign-route.tsx","components/orders-feed/orders-feed.tsx","redux/actions/wsAllActions.ts","pages/page-feed-orders/page-feed-orders.tsx","pages/page-login/page-login.tsx","pages/page-ingredient/page-ingredient.tsx","pages/page-main/page-main.tsx","pages/page-profile/page-profile.tsx","pages/page-register/page-register.tsx","pages/page-reset-password/page-reset-password.tsx","pages/page-orders-history/page-order-history.tsx","pages/page-forgot-password/page-forgot-password.tsx","components/app/app.tsx","reportWebVitals.ts","redux/reducers/constructorReducers.ts","redux/reducers/ingredientsReducers.ts","redux/reducers/orderReducers.ts","redux/reducers/signReducers.ts","redux/reducers/viewedItemReducers.ts","redux/reducers/viewedOrderReducers.ts","redux/reducers/wsAllReducers.ts","redux/reducers/wsSignReducers.ts","redux/reducers/index.ts","redux/store.ts","redux/middleware/socketUserMiddleware.ts","index.tsx","components/sign-login/sign-login.module.css","components/orders-card/orders-card.module.css","components/sign-forgot-password/sign-forgot-password.module.css","components/sign-register/sign-register.module.css","components/sign-reset-password/sign-reset-password.module.css","components/sign-profile-nav/sign-profile-nav.module.css","pages/page-404/page-404.module.css","pages/page-feed-card/page-feed-card.module.css","components/app-header/app-header.module.css","components/burger-constructor/burger-constructor.module.css","components/burger-ingredients/burger-ingredient/burger-ingredient.module.css","pages/page-profile/page-profile.module.css","pages/page-orders-history/page-order-history.module.css","components/app-header/menu-item/menu-item.module.css","components/burger-constructor/burger-constructor-item-swap/burger-constructor-item-swap.module.css","components/ingredient-details/ingredient-details.module.css","components/modal/modal.module.css","components/sign-profile/sign-profile.module.css","pages/page-ingredient/page-ingredient.module.css","pages/page-main/page-main.module.css"],"names":["module","exports","EItemType","EOrderStatus","EItemIcon","Page404","className","styles","page404","container","title","num","text","to","link","useDispatch","dispatchHook","useSelector","selectorHook","formatDistanceDayToNow","date","oneDay","distance","Date","now","getTime","formatDistanceToNow","locale","ru","addSuffix","OrdersCardDetails","order","store","viewedOrder","data","createdAt","header","number","card_details_wrapper","name","status","done","ingredients_list","groupedIngredients","map","ingredient","idx","ingredient_wrapper","img_wrapper","style","zIndex","length","img","src","image_mobile","width","alt","ingredient_cost","count","price","type","ingredients_footer","format","orderTotalPrice","ADD_CONSTRUCTOR_INGREDIENT","DELETE_CONSTRUCTOR_INGREDIENT","RESET_CONSTRUCTOR","GET_CONSTRUCTOR_INGREDIENT","SWAP_CONSTRUCTOR_INGREDIENT","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_FAILED","SET_ORDER_ERROR","GET_AUTH_REQUEST","GET_AUTH_SUCCESS","GET_AUTH_FAILED","SET_AUTH_ERROR","GET_REGISTER_REQUEST","GET_REGISTER_SUCCESS","GET_REGISTER_FAILED","SET_REGISTER_ERROR","GET_PROFILE_REQUEST","GET_PROFILE_SUCCESS","GET_PROFILE_FAILED","SET_PROFILE_ERROR","SET_PROFILE_CLEAR","SET_VIEW_ITEM","RESET_VIEW_ITEM","SET_VIEW_ORDER","RESET_VIEW_ORDER","GET_VIEW_ORDER_REQUEST","GET_VIEW_ORDER_SUCCESS","GET_VIEW_ORDER_FAILED","SET_VIEW_ORDER_ERROR","WS_CONNECTION_START","WS_CONNECTION_STOP","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","WS_SIGN_CONNECTION_START","WS_SIGN_CONNECTION_STOP","WS_SIGN_CONNECTION_SUCCESS","WS_SIGN_CONNECTION_ERROR","WS_SIGN_CONNECTION_CLOSED","WS_SIGN_GET_MESSAGE","addConstructorIngredient","payload","ACCESS_TOKEN","REFRESH_TOKEN","API_URL","ITEM_DETAILS","PROFILE_NAV_TEXT","ITEM_TYPE","INITIAL_FORM_LOGIN","email","password","INITIAL_FORM_REGISTER","INITIAL_FORM_RESET_PASSWD","token","INITIAL_FORM_FORGOT_PASSWD","INITIAL_FORM_PROFILE","headers","post","get","apiGetIngredientsRequest","a","fetch","checkoutRequest","idOrderIngredients","method","authorization","body","JSON","stringify","ingredients","postRegisterRequest","postLoginRequest","postLogoutRequest","patchProfileRequest","apiGetProfileRequest","postForgotPasswordRequest","postResetPasswordRequest","getOrderDetailsRequest","id","dataEmpty","_id","proteins","fat","carbohydrates","calories","image","iconBerger","image_large","__v","getIngredients","dispatch","then","response","ok","json","Promise","reject","result","find","item","catch","error","console","log","setToken","accessToken","refreshToken","bearerToken","includes","split","Cookies","set","localStorage","setItem","getToken","getOrderNumber","getOrderSuccess","getAuthRequest","getAuthFailed","getProfileRequest","getProfileSuccess","getProfileFailed","getRegister","getRegisterSuccess","user","getLogin","getAuthSuccess","getLogout","remove","removeItem","getProfile","success","message","setViewOrder","getOrderDetails","orders","PageFeedCard","useParams","isLoaded","isFetching","useEffect","orderIngredientsWDetails","useMemo","idItem","orderIngredients","orderIngredientsWDetailsGroups","forEach","elem","groupItem","filter","push","reduce","sum","ingredientsWDetails","wrapper","dataMenu","left","href","icon","burgerIcon","exact","listIcon","right","profileIcon","componentsIcon","BurgerIcon","ListIcon","ProfileIcon","MenuItem","sign","isAuthorized","MenuIcon","menu_link","activeClassName","menu_link_active","AppHeader","menu","logo","menu_right","ConstructorItem","itemData","isLocked","thumbnail","cursor","ConstructorItemSwap","index","moveElem","ref","useRef","useDrop","accept","collect","monitor","handlerId","getHandlerId","hover","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","useDrag","isDragging","drag","opacity","drag_icon","handleClose","BurgerConstructor","openModal","cart","state","prodData","dropTarget","coverData","Object","keys","sortedData","bun","empty","middleData","Array","isArray","fillers","totalBurgerPrice","swapConstructorIngredient","item_list","scroll_list","element","indx","checkout_container","size","onClick","BurgerIngredient","itemCounter","onItemClick","history","useHistory","dragRef","role","replace","background","item_image","item_description","item_name","BurgerIngredients","useState","currentTab","setCurrentTab","useInView","threshold","bunsRef","inViewBuns","mainsRef","inViewFilling","saucesRef","inViewSauces","setTab","tab","document","getElementById","scrollIntoView","behavior","buhData","typeBun","sauceData","typeSauce","mainData","typeMain","countItem","itemId","countItemBun","header_tabs","tabs","value","active","sec_items","sec_title","items_list","IngredientDetailsItem","details_list_item","IngredientDetails","viewedItem","details_list","ModalOverlay","closeModal","modal_overlay","Modal","children","modalTitle","closeModalByEscKey","e","key","stopImmediatePropagation","addEventListener","removeEventListener","modalRoot","querySelector","ReactDOM","createPortal","modal","OrderDetails","targetLength","numberOrd","toString","padStart","icon_done","spinWhite","orderDone","wsUrl","OrderFailed","orderInfo","OrdersCard","cardOfProfile","wsSign","wsConnected","order_item","order_info","order_number","ingredients_info","count_wrapper","ingredients_price","Orders","orders_list","slice","reverse","ProtectedRoute","rest","render","location","pathname","from","SignForgotPassword","form","setForm","login","onSubmit","resetPassword","getForgotPassword","preventDefault","noValidate","input_container","onChange","target","fieldName","checked","prev","placeholder","button_container","link_container","SignLogin","onFieldChange","SignProfile","lastUpdated","ProfileNav","nav__list","SignRegister","SignResetPassword","useLocation","action","getResetPassword","SignRoute","OrdersFeed","wsAll","total","totalToday","doneOrders","pendingOrders","content_wrapper","order_list","info_wrapper","info_table","list","doneOrder","list_item","list_item_done","progress","pendingOrder","total_count","today_count","PageFeedOrders","PageLogin","IngredientPage","HomePage","visibleOrderDetails","setVisibleOrderDetails","visibleOrderFailed","setVisibleOrderFailed","visibleIngredientDetails","setVisibleIngredientDetails","match","useRouteMatch","isExact","path","DndProvider","backend","HTML5Backend","main","idsCard","PageProfile","navText","setNavText","getItem","profile","nav_container","nav__text","PageRegister","PageResetPassword","OrdersCardDetailsPage","orderIngredientsDetailsGroups","PageForgotPassword","App","nav_panel","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","fetchingFailed","wsConnectionFailed","rootReducer","combineReducers","splice","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","socket","next","WebSocket","close","onopen","event","onerror","onmessage","send","parse","onclose","socketUserMiddleware","createStore","StrictMode"],"mappings":"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","file":"static/js/main.7d684cf6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"app_wrapper__HhYgi\",\"nav_panel\":\"app_nav_panel__1CF8T\",\"main\":\"app_main__39tvC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-constructor-item_item__3TAnD\",\"item_elem\":\"burger-constructor-item_item_elem__3uivU\",\"drag_icon\":\"burger-constructor-item_drag_icon__1Fc2A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-details-item_container__hC2kH\",\"details_list\":\"ingredient-details-item_details_list__5Vqdt\",\"details_list_item\":\"ingredient-details-item_details_list_item__1dYBh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_overlay\":\"modal-overlay_modal_overlay__zeC8G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon_done\":\"order-details_icon_done__1TYXN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders_list\":\"orders_orders_list__1dbWD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"page-feed-orders_wrapper__N4lH-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content_wrapper\":\"orders-feed_content_wrapper__KBObg\",\"header\":\"orders-feed_header__2mijr\",\"order_list\":\"orders-feed_order_list__18Fqs\",\"info_wrapper\":\"orders-feed_info_wrapper__1QlPz\",\"info_table\":\"orders-feed_info_table__31nyI\",\"done\":\"orders-feed_done__1fKo3\",\"progress\":\"orders-feed_progress__20Ap0\",\"list\":\"orders-feed_list__3gxIS\",\"list_item\":\"orders-feed_list_item__3eXiW\",\"list_item_done\":\"orders-feed_list_item_done__3ATNt\",\"count\":\"orders-feed_count__33y6y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__2q9mv\",\"scroll_list\":\"burger-ingredients_scroll_list__Lkp5I\",\"header_tabs\":\"burger-ingredients_header_tabs__2Ju8I\",\"tabs\":\"burger-ingredients_tabs__14f4d\",\"sec_items\":\"burger-ingredients_sec_items__1StiY\",\"items_list\":\"burger-ingredients_items_list__WVHAt\",\"item\":\"burger-ingredients_item__3zfub\",\"item_image\":\"burger-ingredients_item_image__19BTv\",\"item_description\":\"burger-ingredients_item_description__21kTq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"orders-card-details_header__2Imd3\",\"card_details_wrapper\":\"orders-card-details_card_details_wrapper__1GLPr\",\"order_id\":\"orders-card-details_order_id__13ZHJ\",\"orders_item\":\"orders-card-details_orders_item__gDrwn\",\"order_info\":\"orders-card-details_order_info__3Fq-R\",\"status\":\"orders-card-details_status__3Ky51\",\"done\":\"orders-card-details_done__4M2DI\",\"ingredients_cost\":\"orders-card-details_ingredients_cost__1PIJo\",\"ingredients_list\":\"orders-card-details_ingredients_list__2V9t8\",\"ingredient_wrapper\":\"orders-card-details_ingredient_wrapper__Kn6D5\",\"img_wrapper\":\"orders-card-details_img_wrapper__18UgX\",\"img\":\"orders-card-details_img__17OO_\",\"name\":\"orders-card-details_name__37_mI\",\"ingredient_cost\":\"orders-card-details_ingredient_cost__3MqNf\",\"ingredients_footer\":\"orders-card-details_ingredients_footer__36QUO\"};","export type TId = string | number;\r\n\r\nexport enum EItemType {\r\n  \"typeBun\" = \"bun\",\r\n  \"typeSauce\" = \"sauce\",\r\n  \"typeMain\" = \"main\",\r\n  \"typeEmpty\" = \"empty\",\r\n}\r\n\r\nexport enum EOrderStatus {\r\n  \"done\" = \"\",\r\n  \"pending\" = \"\",\r\n  \"created\" = \"\",\r\n  \"cancel\" = \"\",\r\n}\r\n\r\nexport type TIngredient = {\r\n  _id: TId;\r\n  name: string;\r\n  type: EItemType;\r\n  proteins: number;\r\n  fat: number;\r\n  carbohydrates: number;\r\n  calories: number;\r\n  price: number;\r\n  image: string;\r\n  image_mobile: string;\r\n  image_large: string;\r\n  __v: number;\r\n};\r\n\r\nexport type TSortedIngredient = TIngredient & { index: number };\r\nexport type TGroupedIngredient = TIngredient & { count: number };\r\n\r\nexport type TOrder = {\r\n  _id: TId;\r\n  ingredients: ReadonlyArray<TId>;\r\n  owner?: string | TOwner;\r\n  status: keyof typeof EOrderStatus;\r\n  name: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  number: number;\r\n  price?: number;\r\n  __v?: number;\r\n};\r\n\r\nexport type TViewedOrder = TOrder & {\r\n  groupedIngredients: Array<TGroupedIngredient>;\r\n  ingredientsWDetails: Array<TIngredient>;\r\n  orderTotalPrice: number;\r\n};\r\n\r\nexport type TOrderWS = Omit<TOrder, \"owner\" | \"__v\" | \"price\">;\r\n\r\nexport type TOrderWSAll = {\r\n  orders: ReadonlyArray<TOrderWS>;\r\n  total: number;\r\n  totalToday: number;\r\n};\r\n\r\nexport type TSignData = {\r\n  name: string;\r\n  email: string;\r\n};\r\nexport type TSignDataWPassword = TSignData & {\r\n  password?: string;\r\n};\r\nexport type TSignDataForgoutPassword = Omit<TSignData, \"name\">;\r\nexport type TSignDataLogin = {\r\n  email: string;\r\n  password: string;\r\n};\r\nexport type TSignDataLogResetPassword = {\r\n  token: string;\r\n  password: string;\r\n};\r\nexport type TOwner = TSignData & {\r\n  createdAt: string;\r\n  updatedAt: string;\r\n};\r\n","export enum EItemIcon  {\r\n    burgerIcon= \"burgerIcon\",\r\n    listIcon= \"listIcon\",\r\n    profileIcon= \"profileIcon\"\r\n}\r\n\r\nexport type IItem = {\r\n    id: string;\r\n    name: string;\r\n    href: string;\r\n    icon: EItemIcon;\r\n    exact: boolean;\r\n};","import { FC } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport styles from \"./page-404.module.css\";\r\n\r\nconst Page404: FC = () => (\r\n  <div className={styles.page404}>\r\n    <div className={styles.container}>\r\n      <h1 className={styles.title}>\r\n          &nbsp;\r\n        <span className={styles.num}>404</span>\r\n      </h1>\r\n      <p className={styles.text}>\r\n          ,     ,         \r\n        \r\n      </p>\r\n      <Link to=\"/\" className={styles.link}>\r\n           \r\n      </Link>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Page404;\r\n","import { TypedUseSelectorHook, useDispatch as dispatchHook, useSelector as selectorHook } from \"react-redux\";\r\n\r\nimport { AppDispatch, AppThunk, RootState } from \"../redux/types\";\r\n\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\n","import { formatDistanceToNow } from \"date-fns\";\r\nimport { ru } from \"date-fns/locale\";\r\n\r\nfunction formatDistanceDayToNow(date: Date) {\r\n  const oneDay = 1000 * 3600 * 24;\r\n  const distance = Date.now() - date.getTime();\r\n  let deltaString = \"\";\r\n  if (distance < oneDay && distance > 0) {\r\n    return \"C\";\r\n  } else if (distance < oneDay * 2) {\r\n    return \"\";\r\n  } else if (distance < oneDay * 4) {\r\n    deltaString = distance + \"  \";\r\n  } else {\r\n    deltaString = distance + \"  \";\r\n  }\r\n  return formatDistanceToNow(date, { locale: ru, addSuffix: true });\r\n}\r\n\r\nexport { formatDistanceDayToNow };\r\n","import { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { format } from \"date-fns\";\r\nimport { FC } from \"react\";\r\n\r\nimport { useSelector } from \"../../utils/hooks\";\r\nimport { EOrderStatus } from \"../../redux/types\";\r\nimport { formatDistanceDayToNow } from \"../../utils/utils\";\r\nimport styles from \"./orders-card-details.module.css\";\r\n\r\n\r\nconst OrdersCardDetails: FC = () => {\r\n  const { data: order } = useSelector((store) => store.viewedOrder);\r\n\r\n  const createdAt = order.createdAt ? new Date(order.createdAt) : new Date();\r\n\r\n  return (\r\n    <>\r\n      <h2 className={`text text_type_digits-default ${styles.header}`}>#{order.number}</h2>\r\n      <div className={styles.card_details_wrapper}>\r\n        <h2 className=\"text text_type_main-medium\">{order.name}aa</h2>\r\n        <p className={`text text_type_main-default ${styles.status} ${order.status === \"done\" ? styles.done : \"\"}`}>\r\n          {EOrderStatus[order.status]}\r\n        </p>\r\n        <h2 className=\"text text_type_main-medium\">:</h2>\r\n        <div className={styles.ingredients_list}>\r\n          {order.groupedIngredients?.map((ingredient, idx) => (\r\n            // eslint-disable-next-line react/no-array-index-key\r\n            <div className={styles.ingredient_wrapper} key={idx}>\r\n              <div className={styles.img_wrapper} style={{ zIndex: order.groupedIngredients.length - idx }}>\r\n                <div className={styles.img}>\r\n                  <img src={ingredient.image_mobile} width=\"64\" alt={ingredient.name} />\r\n                </div>\r\n              </div>\r\n              <p className={`text text_type_main-default ${styles.name}`}>{ingredient.name}</p>\r\n              <div className={styles.ingredient_cost}>\r\n                <p className=\"text text_type_digits-default\">{`${ingredient.count}x${ingredient.price}`}</p>\r\n                <CurrencyIcon type=\"primary\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className={styles.ingredients_footer}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">{`${formatDistanceDayToNow(\r\n            createdAt\r\n          )}, ${format(createdAt, \"HH:mm 'i-'z\")}`}</p>\r\n          <div className={styles.ingredient_cost}>\r\n            <p className=\"text text_type_digits-default\">{order.orderTotalPrice}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrdersCardDetails;\r\n","export const ADD_CONSTRUCTOR_INGREDIENT = \"ADD_CONSTRUCTOR_INGREDIENT\" as const;\r\nexport const DELETE_CONSTRUCTOR_INGREDIENT = \"DELETE_CONSTRUCTOR_INGREDIENT\" as const;\r\nexport const RESET_CONSTRUCTOR = \"RESET_CONSTRUCTOR\" as const;\r\nexport const GET_CONSTRUCTOR_INGREDIENT = \"GET_CONSTRUCTOR_INGREDIENT\" as const;\r\nexport const SWAP_CONSTRUCTOR_INGREDIENT = \"SWAP_CONSTRUCTOR_INGREDIENT\" as const;\r\n","export const GET_INGREDIENTS_REQUEST = \"GET_INGREDIENTS_REQUEST\" as const;\r\nexport const GET_INGREDIENTS_SUCCESS = \"GET_INGREDIENTS_SUCCESS\" as const;\r\nexport const GET_INGREDIENTS_FAILED = \"GET_INGREDIENTS_FAILED\" as const;\r\n","export const GET_ORDER_REQUEST = \"GET_ORDER_REQUEST\" as const;\r\nexport const GET_ORDER_SUCCESS = \"GET_ORDER_SUCCESS\" as const;\r\nexport const GET_ORDER_FAILED = \"GET_ORDER_FAILED\" as const;\r\nexport const SET_ORDER_ERROR = \"SET_ORDER_ERROR\" as const;\r\n","export const GET_AUTH_REQUEST = \"GET_AUTH_REQUEST\" as const;\r\nexport const GET_AUTH_SUCCESS = \"GET_AUTH_SUCCESS\" as const;\r\nexport const GET_AUTH_FAILED = \"GET_AUTH_FAILED\" as const;\r\nexport const SET_AUTH_ERROR = \"SET_AUTH_ERROR\" as const;\r\nexport const GET_REGISTER_REQUEST = \"GET_REGISTER_REQUEST\" as const;\r\nexport const GET_REGISTER_SUCCESS = \"GET_REGISTER_SUCCESS\" as const;\r\nexport const GET_REGISTER_FAILED = \"GET_REGISTER_FAILED\" as const;\r\nexport const SET_REGISTER_ERROR = \"SET_REGISTER_ERROR\" as const;\r\nexport const GET_PROFILE_REQUEST = \"GET_PROFILE_REQUEST\" as const;\r\nexport const GET_PROFILE_SUCCESS = \"GET_PROFILE_SUCCESS\" as const;\r\nexport const GET_PROFILE_FAILED = \"GET_PROFILE_FAILED\" as const;\r\nexport const SET_PROFILE_ERROR = \"SET_PROFILE_ERROR\" as const;\r\nexport const SET_PROFILE_CLEAR = \"SET_PROFILE_CLEAR\" as const;\r\n","export const SET_VIEW_ITEM = \"SET_VIEW_ITEM\" as const;\r\nexport const RESET_VIEW_ITEM = \"RESET_VIEW_ITEM\" as const;\r\n","export const SET_VIEW_ORDER = \"SET_VIEW_ORDER\" as const;\r\nexport const RESET_VIEW_ORDER = \"RESET_VIEW_ORDER\" as const;\r\nexport const GET_VIEW_ORDER_REQUEST = \"GET_VIEW_ORDER_REQUEST\" as const;\r\nexport const GET_VIEW_ORDER_SUCCESS = \"GET_VIEW_ORDER_SUCCESS\" as const;\r\nexport const GET_VIEW_ORDER_FAILED = \"GET_VIEW_ORDER_FAILED\" as const;\r\nexport const SET_VIEW_ORDER_ERROR = \"SET_VIEW_ORDER_ERROR\" as const;\r\n","export const WS_CONNECTION_START = \"WS_CONNECTION_START\" as const;\r\nexport const WS_CONNECTION_STOP = \"WS_CONNECTION_STOP\" as const;\r\nexport const WS_CONNECTION_SUCCESS = \"WS_CONNECTION_SUCCESS\" as const;\r\nexport const WS_CONNECTION_ERROR = \"WS_CONNECTION_ERROR\" as const;\r\nexport const WS_CONNECTION_CLOSED = \"WS_CONNECTION_CLOSED\" as const;\r\nexport const WS_SEND_MESSAGE = \"WS_SEND_MESSAGE\" as const;\r\nexport const WS_GET_MESSAGE = \"WS_GET_MESSAGE\" as const;\r\n","export const WS_SIGN_CONNECTION_START = \"WS_SIGN_CONNECTION_START\" as const;\r\nexport const WS_SIGN_CONNECTION_STOP = \"WS_SIGN_CONNECTION_STOP\" as const;\r\nexport const WS_SIGN_CONNECTION_SUCCESS = \"WS_SIGN_CONNECTION_SUCCESS\" as const;\r\nexport const WS_SIGN_CONNECTION_ERROR = \"WS_SIGN_CONNECTION_ERROR\" as const;\r\nexport const WS_SIGN_CONNECTION_CLOSED = \"WS_SIGN_CONNECTION_CLOSED\" as const;\r\nexport const WS_SIGN_GET_MESSAGE = \"WS_SIGN_GET_MESSAGE\" as const;\r\nexport const WS_SIGN_SEND_MESSAGE = \"WS_SIGN_SEND_MESSAGE\" as const;\r\n","import {\r\n  ADD_CONSTRUCTOR_INGREDIENT,\r\n  DELETE_CONSTRUCTOR_INGREDIENT,\r\n  GET_CONSTRUCTOR_INGREDIENT,\r\n  RESET_CONSTRUCTOR,\r\n  SWAP_CONSTRUCTOR_INGREDIENT,\r\n} from \"../action-types\";\r\nimport type { TId, TIngredient } from \"../types/data\";\r\n\r\nexport interface IAddConstructorIngredient {\r\n  readonly type: typeof ADD_CONSTRUCTOR_INGREDIENT;\r\n  readonly payload: TIngredient;\r\n}\r\n\r\nexport interface IDeleteConstructorIngredient {\r\n  readonly type: typeof DELETE_CONSTRUCTOR_INGREDIENT;\r\n  readonly payload: number;\r\n}\r\n\r\nexport interface IResetConstructor {\r\n  readonly type: typeof RESET_CONSTRUCTOR;\r\n}\r\n\r\nexport interface IGetConstructorIngredient {\r\n  readonly type: typeof GET_CONSTRUCTOR_INGREDIENT;\r\n  readonly payload: Array<TIngredient>;\r\n}\r\n\r\nexport interface ISwapConstructorIngredient {\r\n  readonly type: typeof SWAP_CONSTRUCTOR_INGREDIENT;\r\n  readonly payload: {\r\n    dragIndex: number;\r\n    hoverIndex: number;\r\n  };\r\n}\r\n\r\nexport type TConstructorActions =\r\n  | ISwapConstructorIngredient\r\n  | IResetConstructor\r\n  | IDeleteConstructorIngredient\r\n  | IAddConstructorIngredient\r\n  | IGetConstructorIngredient;\r\n\r\nexport const deleteConstructorIngredient = (id: number): IDeleteConstructorIngredient => ({\r\n  type: DELETE_CONSTRUCTOR_INGREDIENT,\r\n  payload: id,\r\n});\r\n\r\nexport const resetConstructor = (): IResetConstructor => ({\r\n  type: RESET_CONSTRUCTOR,\r\n});\r\n\r\nexport const addConstructorIngredient = (payload: TIngredient): IAddConstructorIngredient => ({\r\n  type: ADD_CONSTRUCTOR_INGREDIENT,\r\n  payload,\r\n});\r\n\r\nexport const swapConstructorIngredient = (dragIndex: number, hoverIndex: number): ISwapConstructorIngredient => ({\r\n  type: SWAP_CONSTRUCTOR_INGREDIENT,\r\n  payload: { dragIndex, hoverIndex },\r\n});\r\n","const ACCESS_TOKEN = \"accessToken\";\r\nconst REFRESH_TOKEN = \"refreshToken\";\r\n\r\nconst API_URL = \"https://norma.nomoreparties.space/api\";\r\nconst WS_URL = \"wss://norma.nomoreparties.space/orders/all\";\r\nconst WS_SIGN_URL = \"wss://norma.nomoreparties.space/orders\";\r\n\r\nconst ITEM_DETAILS = {\r\n  calories: \", \",\r\n  proteins: \", \",\r\n  fat: \", \",\r\n  carbohydrates: \", \",\r\n};\r\n\r\nconst PROFILE_NAV_TEXT = {\r\n  profile: \"        \",\r\n  orders: \"        \",\r\n};\r\n\r\nconst ORDER_STATUS = {\r\n  done: \"\",\r\n  pending: \"\",\r\n  created: \"\",\r\n};\r\n\r\nconst ITEM_TYPE = {\r\n  FILLERS: \"fillers\",\r\n};\r\n\r\nconst INITIAL_FORM_LOGIN = {\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\nconst INITIAL_FORM_REGISTER = {\r\n  name: \"\",\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\nconst INITIAL_FORM_RESET_PASSWD = {\r\n  password: \"\",\r\n  token: \"\",\r\n};\r\nconst INITIAL_FORM_FORGOT_PASSWD = {\r\n  email: \"\",\r\n};\r\n\r\nconst INITIAL_FORM_PROFILE = {\r\n  name: \"\",\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\n\r\nexport {\r\n  ACCESS_TOKEN,\r\n  API_URL,\r\n  INITIAL_FORM_FORGOT_PASSWD,\r\n  INITIAL_FORM_LOGIN,\r\n  INITIAL_FORM_PROFILE,\r\n  INITIAL_FORM_REGISTER,\r\n  INITIAL_FORM_RESET_PASSWD,\r\n  ITEM_DETAILS,\r\n  ITEM_TYPE,\r\n  ORDER_STATUS,\r\n  PROFILE_NAV_TEXT,\r\n  REFRESH_TOKEN,\r\n  WS_SIGN_URL,\r\n  WS_URL};\r\n","import { API_URL } from \"../utils/constants\";\r\nimport type {\r\n  TSignDataWPassword,\r\n  TSignDataForgoutPassword,\r\n  TSignDataLogin,\r\n  TSignDataLogResetPassword,\r\n  TId,\r\n} from \"../redux/types/data\";\r\n\r\nconst headers = {\r\n  post: { \"Content-Type\": \"application/json\" },\r\n  get: {},\r\n};\r\n\r\nexport const apiGetIngredientsRequest = async () => await fetch(`${API_URL}/ingredients`);\r\n\r\nexport const checkoutRequest = async (idOrderIngredients: Array<TId>, token: string) =>\r\n  await fetch(`${API_URL}/orders`, {\r\n    method: \"POST\",\r\n    headers: { ...headers.post, authorization: `Bearer ${token}` },\r\n    body: JSON.stringify({ ingredients: idOrderIngredients }),\r\n  });\r\n\r\nexport const postRegisterRequest = async (data: TSignDataWPassword) =>\r\n  await fetch(`${API_URL}/auth/register`, {\r\n    method: \"POST\",\r\n    headers: headers.post,\r\n    body: JSON.stringify({ ...data }),\r\n  });\r\n\r\nexport const postLoginRequest = async (data: TSignDataLogin) =>\r\n  await fetch(`${API_URL}/auth/login`, {\r\n    method: \"POST\",\r\n    headers: headers.post,\r\n    body: JSON.stringify({ ...data }),\r\n  });\r\n\r\nexport const postRefreshTokenRequest = async (token: string) =>\r\n  await fetch(`${API_URL}/auth/token`, {\r\n    method: \"POST\",\r\n    headers: headers.post,\r\n    body: JSON.stringify({ token }),\r\n  });\r\n\r\nexport const postLogoutRequest = async (token: string) =>\r\n  await fetch(`${API_URL}/auth/logout`, {\r\n    method: \"POST\",\r\n    headers: headers.post,\r\n    body: JSON.stringify({ token }),\r\n  });\r\n\r\nexport const patchProfileRequest = async (data: TSignDataWPassword, token: string) =>\r\n  await fetch(`${API_URL}/auth/user`, {\r\n    method: \"PATCH\",\r\n    headers: { ...headers.post, authorization: `Bearer ${token}` },\r\n    body: JSON.stringify({ ...data }),\r\n  });\r\n\r\nexport const apiGetProfileRequest = async (token: string) =>\r\n  await fetch(`${API_URL}/auth/user`, {\r\n    method: \"GET\",\r\n    headers: { ...headers.get, authorization: `Bearer ${token}` },\r\n  });\r\n\r\nexport const postForgotPasswordRequest = async (data: TSignDataForgoutPassword) =>\r\n  await fetch(`${API_URL}/password-reset`, {\r\n    method: \"POST\",\r\n    headers: { ...headers.post },\r\n    body: JSON.stringify({ ...data }),\r\n  });\r\n\r\nexport const postResetPasswordRequest = async (data: TSignDataLogResetPassword) =>\r\n  await fetch(`${API_URL}/password-reset/reset`, {\r\n    method: \"POST\",\r\n    headers: { ...headers.post },\r\n    body: JSON.stringify({ ...data }),\r\n  });\r\n\r\nexport const getOrderDetailsRequest = async (id: TId) => {\r\n  return await fetch(`${API_URL}/orders/${id}`, {\r\n    method: \"GET\",\r\n    headers: { ...headers.get },\r\n  });\r\n};\r\n","export default __webpack_public_path__ + \"static/media/icon-burger.19283f87.svg\";","import iconBerger from \"../../images/icon-burger.svg\";\r\n\r\nconst dataEmpty = [\r\n  {\r\n    _id: \"60666c42cc7b410027a1a9b2\",\r\n    name: \"   \",\r\n    type: \"empty\",\r\n    proteins: 0,\r\n    fat: 0,\r\n    carbohydrates: 0,\r\n    calories: 0,\r\n    price: 0,\r\n    image: iconBerger,\r\n    image_mobile: iconBerger,\r\n    image_large: iconBerger,\r\n    __v: 0,\r\n  },\r\n];\r\n\r\nexport default dataEmpty;\r\n","import { apiGetIngredientsRequest } from \"../../utils/api\";\r\nimport dataEmpty from \"../../utils/mock/data-mock-empty\";\r\nimport { GET_INGREDIENTS_FAILED, GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_SUCCESS } from \"../action-types\";\r\nimport type { TIngredient } from \"../types/data\";\r\nimport { AppDispatch, AppThunk } from \"../types/redux\";\r\nimport { addConstructorIngredient } from \".\";\r\n\r\nexport interface IGetIngredientsRequest {\r\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\r\n}\r\nexport interface IGetIngredientsSuccess {\r\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\r\n  readonly payload: Array<TIngredient>;\r\n}\r\nexport interface IGetIngredientsFailed {\r\n  readonly type: typeof GET_INGREDIENTS_FAILED;\r\n}\r\n\r\nexport type TIngredientsActions = IGetIngredientsFailed | IGetIngredientsSuccess | IGetIngredientsRequest;\r\n\r\nexport const getIngredientsRequest = (): IGetIngredientsRequest => ({\r\n  type: GET_INGREDIENTS_REQUEST,\r\n});\r\n\r\nexport const getIngredientsSuccess = (data: Array<TIngredient>): IGetIngredientsSuccess => ({\r\n  type: GET_INGREDIENTS_SUCCESS,\r\n  payload: data,\r\n});\r\n\r\nexport const getIngredientsFailed = (): IGetIngredientsFailed => ({\r\n  type: GET_INGREDIENTS_FAILED,\r\n});\r\n\r\nexport const getIngredients: AppThunk = () =>\r\n  function (dispatch: AppDispatch) {\r\n    dispatch(getIngredientsRequest());\r\n    apiGetIngredientsRequest()\r\n      .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n      .then((result) => {\r\n        dispatch(getIngredientsSuccess(result.data));\r\n\r\n        dispatch(addConstructorIngredient(dataEmpty.find((item) => item.type === \"empty\") as TIngredient));\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        dispatch(getIngredientsFailed());\r\n      });\r\n  };\r\n","import Cookies from \"js-cookie\";\r\n\r\nimport { postRefreshTokenRequest } from \"../utils/api\";\r\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"../utils/constants\";\r\nimport { TSignActions } from \"../redux/actions\";\r\nimport { AppDispatch } from \"../redux/types\";\r\n\r\ninterface IToken {\r\n  accessToken: string;\r\n  refreshToken: string;\r\n}\r\n\r\nconst setToken = ({ accessToken, refreshToken }: IToken) => {\r\n  const bearerToken = accessToken.includes(\"Bearer\") ? accessToken.split(\" \")[1] : accessToken;\r\n  Cookies.set(ACCESS_TOKEN, bearerToken);\r\n  localStorage.setItem(REFRESH_TOKEN, refreshToken);\r\n};\r\n\r\nconst getToken = () => Cookies.get(ACCESS_TOKEN);\r\n\r\nconst getRefreshToken = () => localStorage.getItem(REFRESH_TOKEN);\r\n\r\nconst clearToken = () => {\r\n  Cookies.remove(ACCESS_TOKEN);\r\n  localStorage.removeItem(REFRESH_TOKEN);\r\n};\r\n\r\nconst refreshToken = (afterRefresh: TSignActions) => (dispatch: AppDispatch) => {\r\n  postRefreshTokenRequest(localStorage.getItem(REFRESH_TOKEN) as string)\r\n    .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n    .then((result) => {\r\n      setToken({ accessToken: result.accessToken, refreshToken: result.refreshToken });\r\n      dispatch(afterRefresh);\r\n    })\r\n    .catch((e) => {\r\n      console.log(e);\r\n    });\r\n};\r\n\r\nexport { clearToken, getRefreshToken, getToken, refreshToken, setToken };\r\n","import { addConstructorIngredient, resetConstructor } from \".\";\r\nimport dataEmpty from \"../../utils/mock/data-mock-empty\";\r\nimport { GET_ORDER_REQUEST, GET_ORDER_SUCCESS, GET_ORDER_FAILED, SET_ORDER_ERROR } from \"../action-types\";\r\nimport { checkoutRequest } from \"../../utils/api\";\r\nimport { getToken } from \"../../utils/token\";\r\nimport type { TOrder, TIngredient, TId } from \"../types/data\";\r\nimport { AppDispatch, AppThunk } from \"../types/redux\";\r\n\r\nexport interface IGetOrderRequest {\r\n  readonly type: typeof GET_ORDER_REQUEST;\r\n}\r\nexport interface IGetOrderSuccess {\r\n  readonly type: typeof GET_ORDER_SUCCESS;\r\n  readonly payload: TOrder;\r\n}\r\nexport interface IGetOrderFailed {\r\n  readonly type: typeof GET_ORDER_FAILED;\r\n}\r\nexport interface ISetOrderError {\r\n  readonly type: typeof SET_ORDER_ERROR;\r\n  readonly payload: string;\r\n}\r\n\r\nexport type TOrderActions = IGetOrderRequest | IGetOrderSuccess | IGetOrderFailed | ISetOrderError;\r\n\r\nexport const getOrderRequest = (): TOrderActions => ({\r\n  type: GET_ORDER_REQUEST,\r\n});\r\nexport const getOrderSuccess = (data: TOrder): TOrderActions => ({\r\n  type: GET_ORDER_SUCCESS,\r\n  payload: data,\r\n});\r\nexport const getOrderFailed = (): TOrderActions => ({\r\n  type: GET_ORDER_FAILED,\r\n});\r\nexport const setOrderError = (data: string): TOrderActions => ({\r\n  type: SET_ORDER_ERROR,\r\n  payload: data,\r\n});\r\n\r\nexport const getOrderNumber: AppThunk = (data: Array<TId>) =>\r\n  function (dispatch: AppDispatch) {\r\n    dispatch(getOrderRequest());\r\n    const accessToken = getToken() as string;\r\n    checkoutRequest(data, accessToken)\r\n      .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n      .then((result) => {\r\n        dispatch(getOrderSuccess(result.order));\r\n\r\n        dispatch(resetConstructor());\r\n\r\n        dispatch(addConstructorIngredient(dataEmpty.find((item) => item.type === \"empty\") as TIngredient));\r\n      })\r\n      .catch(() => {\r\n        dispatch(getOrderFailed());\r\n      });\r\n  };\r\n","import { History } from \"history\";\r\n\r\nimport {\r\n  apiGetProfileRequest,\r\n  patchProfileRequest,\r\n  postForgotPasswordRequest,\r\n  postLoginRequest,\r\n  postLogoutRequest,\r\n  postRegisterRequest,\r\n  postResetPasswordRequest,\r\n} from \"../../utils/api\";\r\nimport { clearToken, getToken, setToken } from \"../../utils/token\";\r\nimport {\r\n  GET_AUTH_FAILED,\r\n  GET_AUTH_REQUEST,\r\n  GET_AUTH_SUCCESS,\r\n  GET_PROFILE_FAILED,\r\n  GET_PROFILE_REQUEST,\r\n  GET_PROFILE_SUCCESS,\r\n  GET_REGISTER_FAILED,\r\n  GET_REGISTER_REQUEST,\r\n  GET_REGISTER_SUCCESS,\r\n  SET_AUTH_ERROR,\r\n  SET_PROFILE_CLEAR,\r\n  SET_PROFILE_ERROR,\r\n  SET_REGISTER_ERROR,\r\n} from \"../action-types\";\r\nimport type {\r\n  TSignData,\r\n  TSignDataForgoutPassword,\r\n  TSignDataLogin,\r\n  TSignDataLogResetPassword,\r\n  TSignDataWPassword,\r\n} from \"../types/data\";\r\nimport { AppDispatch, AppThunk } from \"../types/redux\";\r\n\r\nexport interface IGetAuthRequest {\r\n  readonly type: typeof GET_AUTH_REQUEST;\r\n}\r\nexport interface IGetAuthSuccess {\r\n  readonly type: typeof GET_AUTH_SUCCESS;\r\n  readonly payload: TSignData;\r\n}\r\nexport interface IGetAuthFailed {\r\n  readonly type: typeof GET_AUTH_FAILED;\r\n}\r\nexport interface ISetAuthError {\r\n  readonly type: typeof SET_AUTH_ERROR;\r\n  readonly payload: string;\r\n}\r\n\r\nexport interface IGetRegisterRequest {\r\n  readonly type: typeof GET_REGISTER_REQUEST;\r\n}\r\nexport interface IGetRegisterSuccess {\r\n  readonly type: typeof GET_REGISTER_SUCCESS;\r\n  readonly payload: TSignDataWPassword;\r\n}\r\nexport interface IGetRegisterFailed {\r\n  readonly type: typeof GET_REGISTER_FAILED;\r\n}\r\nexport interface ISetRegisterError {\r\n  readonly type: typeof SET_REGISTER_ERROR;\r\n  readonly payload: string;\r\n}\r\n\r\nexport interface IGetProfileRequest {\r\n  readonly type: typeof GET_PROFILE_REQUEST;\r\n}\r\nexport interface IGetProfileSuccess {\r\n  readonly type: typeof GET_PROFILE_SUCCESS;\r\n  readonly payload: TSignDataWPassword;\r\n}\r\nexport interface IGetProfileFailed {\r\n  readonly type: typeof GET_PROFILE_FAILED;\r\n}\r\nexport interface ISetProfileError {\r\n  readonly type: typeof SET_PROFILE_ERROR;\r\n  readonly payload: string;\r\n}\r\nexport interface IGetProfileClear {\r\n  readonly type: typeof SET_PROFILE_CLEAR;\r\n}\r\n\r\nexport type TSignActions =\r\n  | IGetProfileClear\r\n  | ISetProfileError\r\n  | IGetProfileFailed\r\n  | IGetProfileSuccess\r\n  | IGetProfileRequest\r\n  | ISetRegisterError\r\n  | IGetRegisterFailed\r\n  | IGetRegisterSuccess\r\n  | IGetRegisterRequest\r\n  | ISetAuthError\r\n  | IGetAuthFailed\r\n  | IGetAuthSuccess\r\n  | IGetAuthRequest;\r\n\r\nexport const getAuthRequest = (): TSignActions => ({\r\n  type: GET_AUTH_REQUEST,\r\n});\r\nexport const getAuthSuccess = (data: TSignData): TSignActions => ({\r\n  type: GET_AUTH_SUCCESS,\r\n  payload: data,\r\n});\r\nexport const getAuthFailed = (): TSignActions => ({\r\n  type: GET_AUTH_FAILED,\r\n});\r\nexport const setAuthError = (data: string): TSignActions => ({\r\n  type: SET_AUTH_ERROR,\r\n  payload: data,\r\n});\r\n\r\nexport const getRegisterRequest = (): TSignActions => ({\r\n  type: GET_REGISTER_REQUEST,\r\n});\r\nexport const getRegisterSuccess = (data: TSignDataWPassword): TSignActions => ({\r\n  type: GET_REGISTER_SUCCESS,\r\n  payload: data,\r\n});\r\nexport const getRegisterFailed = (): TSignActions => ({\r\n  type: GET_REGISTER_FAILED,\r\n});\r\nexport const setRegisterError = (data: string): TSignActions => ({\r\n  type: SET_REGISTER_ERROR,\r\n  payload: data,\r\n});\r\n\r\nexport const getProfileRequest = (): TSignActions => ({\r\n  type: GET_PROFILE_REQUEST,\r\n});\r\nexport const getProfileSuccess = (data: TSignDataWPassword): TSignActions => ({\r\n  type: GET_PROFILE_SUCCESS,\r\n  payload: data,\r\n});\r\nexport const getProfileFailed = (): TSignActions => ({\r\n  type: GET_PROFILE_FAILED,\r\n});\r\nexport const setProfileError = (data: string): TSignActions => ({\r\n  type: SET_PROFILE_ERROR,\r\n  payload: data,\r\n});\r\nexport const getProfileClear = (): TSignActions => ({\r\n  type: SET_PROFILE_CLEAR,\r\n});\r\n\r\nconst getRegister: AppThunk = (data: TSignDataWPassword) =>\r\n  function (dispatch: AppDispatch) {\r\n    dispatch(getRegisterRequest());\r\n\r\n    postRegisterRequest(data)\r\n      .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n      .then((result) => {\r\n        setToken({ accessToken: result.accessToken, refreshToken: result.refreshToken });\r\n        dispatch(getRegisterSuccess(result.user));\r\n      })\r\n      .catch(() => {\r\n        dispatch(getRegisterFailed());\r\n      });\r\n  };\r\n\r\nconst getLogin: AppThunk = (data: TSignDataLogin) =>\r\n  function (dispatch: AppDispatch) {\r\n    dispatch(getAuthRequest());\r\n\r\n    postLoginRequest(data)\r\n      .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n      .then((result) => {\r\n        setToken({ accessToken: result.accessToken, refreshToken: result.refreshToken });\r\n        dispatch(getAuthSuccess(result.user));\r\n      })\r\n      .catch(() => {\r\n        dispatch(getAuthFailed());\r\n      });\r\n  };\r\n\r\nconst getLogout: AppThunk = (token: string) =>\r\n  function (dispatch: AppDispatch) {\r\n    dispatch(getAuthRequest());\r\n\r\n    postLogoutRequest(token)\r\n      .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n      .then(() => {\r\n        clearToken();\r\n        dispatch(getProfileClear());\r\n      })\r\n      .catch(() => {\r\n        dispatch(getAuthFailed());\r\n      });\r\n  };\r\n\r\nconst updateProfile: AppThunk = (data: TSignDataWPassword) =>\r\n  function (dispatch: AppDispatch) {\r\n    dispatch(getProfileRequest());\r\n\r\n    const accessToken = getToken() as string;\r\n    patchProfileRequest(data, accessToken)\r\n      .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n      .then((result) => {\r\n        if (!result.success) throw result;\r\n        dispatch(getProfileSuccess(result.user));\r\n      })\r\n      .catch((error) => {\r\n        console.log(error); //\r\n        if (error.message === \"jwt expired\") dispatch(getProfileFailed());\r\n      });\r\n  };\r\n\r\nconst getProfile: AppThunk = () =>\r\n  function (dispatch: AppDispatch) {\r\n    dispatch(getProfileRequest());\r\n\r\n    const accessToken = getToken() as string;\r\n    apiGetProfileRequest(accessToken)\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n        if (!result.success) throw result;\r\n        dispatch(getProfileSuccess(result.user));\r\n      })\r\n      .catch((error) => {\r\n        if (error.message === \"jwt expired\") dispatch(getProfileFailed());\r\n      });\r\n  };\r\n\r\nconst getForgotPassword: AppThunk = (data: TSignDataForgoutPassword, history: History) =>\r\n  function () {\r\n    postForgotPasswordRequest(data)\r\n      .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n      .then((result) => {\r\n        history.push({\r\n          pathname: \"/reset-password\",\r\n          state: { resetPassword: true },\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\nconst getResetPassword: AppThunk = (data: TSignDataLogResetPassword, history: History) =>\r\n  function () {\r\n    postResetPasswordRequest(data)\r\n      .then((response) => (response.ok ? response.json() : Promise.reject(`api err: ${response.status}`)))\r\n      .then((result) =>\r\n        history.push({\r\n          pathname: \"/login\",\r\n          state: { resetPassword: true },\r\n        })\r\n      )\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\nexport { getForgotPassword, getLogin, getLogout, getProfile, getRegister, getResetPassword, updateProfile };\r\n","import { getOrderDetailsRequest } from \"../../utils/api\";\r\nimport {\r\n  GET_VIEW_ORDER_FAILED,\r\n  GET_VIEW_ORDER_REQUEST,\r\n  GET_VIEW_ORDER_SUCCESS,\r\n  RESET_VIEW_ORDER,\r\n  SET_VIEW_ORDER,\r\n  SET_VIEW_ORDER_ERROR,\r\n} from \"../action-types\";\r\nimport type { TId, TViewedOrder } from \"../types/data\";\r\nimport { AppDispatch, AppThunk } from \"../types/redux\";\r\n\r\nexport interface ISetViewOrder {\r\n  readonly type: typeof SET_VIEW_ORDER;\r\n  readonly payload: TViewedOrder;\r\n}\r\nexport interface IResetViewOrder {\r\n  readonly type: typeof RESET_VIEW_ORDER;\r\n}\r\n\r\nexport interface IGetViewOrderRequest {\r\n  readonly type: typeof GET_VIEW_ORDER_REQUEST;\r\n}\r\nexport interface IGetViewOrderSuccess {\r\n  readonly type: typeof GET_VIEW_ORDER_SUCCESS;\r\n  readonly payload: TViewedOrder;\r\n}\r\nexport interface IGetViewOrderFailed {\r\n  readonly type: typeof GET_VIEW_ORDER_FAILED;\r\n}\r\nexport interface ISetViewOrderError {\r\n  readonly type: typeof SET_VIEW_ORDER_ERROR;\r\n  readonly payload: string;\r\n}\r\n\r\nexport type TViewedOrderActions =\r\n  | IGetViewOrderFailed\r\n  | IGetViewOrderSuccess\r\n  | IGetViewOrderRequest\r\n  | IResetViewOrder\r\n  | ISetViewOrder\r\n  | ISetViewOrderError;\r\n\r\nexport const setViewOrder = (data: TViewedOrder): TViewedOrderActions => ({\r\n  type: SET_VIEW_ORDER,\r\n  payload: data,\r\n});\r\nexport const resetViewOrder = (): TViewedOrderActions => ({\r\n  type: RESET_VIEW_ORDER,\r\n});\r\n\r\nexport const getViewOrderRequest = (): TViewedOrderActions => ({\r\n  type: GET_VIEW_ORDER_REQUEST,\r\n});\r\nexport const getViewOrderSuccess = (data: TViewedOrder): TViewedOrderActions => ({\r\n  type: GET_VIEW_ORDER_SUCCESS,\r\n  payload: data,\r\n});\r\nexport const getViewOrderFailed = (): TViewedOrderActions => ({\r\n  type: GET_VIEW_ORDER_FAILED,\r\n});\r\nexport const setViewOrderError = (data: string): TViewedOrderActions => ({\r\n  type: SET_VIEW_ORDER_ERROR,\r\n  payload: data,\r\n});\r\n\r\nconst getOrderDetails: AppThunk = (id: TId) =>\r\n  function (dispatch: AppDispatch) {\r\n    dispatch(getViewOrderRequest());\r\n    getOrderDetailsRequest(id)\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n        if (!result.success) throw result;\r\n        dispatch(getViewOrderSuccess(result.orders[0]));\r\n      })\r\n      .catch(() => {\r\n        dispatch(getViewOrderFailed());\r\n      });\r\n  };\r\n\r\nexport { getOrderDetails };\r\n","import { FC, useEffect, useMemo } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport OrdersCardDetails from \"../../components/orders-card-details/orders-card-details\";\r\nimport { getOrderDetails, setViewOrder } from \"../../redux/actions\";\r\nimport { TGroupedIngredient } from \"../../redux/types\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\nimport styles from \"./page-feed-card.module.css\";\r\n\r\ninterface IParams {\r\n  id: string;\r\n  number: string;\r\n}\r\n\r\nconst PageFeedCard: FC = () => {\r\n  const { id, number } = useParams<IParams>();\r\n  const dispatch = useDispatch();\r\n  const { data: ingredients } = useSelector((store) => store.ingredients);\r\n  const { isLoaded, isFetching, data: order } = useSelector((store) => store.viewedOrder);\r\n\r\n  useEffect(() => {\r\n    dispatch(getOrderDetails(number));\r\n  }, [dispatch]);\r\n\r\n  const orderIngredientsWDetails = useMemo(\r\n    () => order?.ingredients?.map((idItem) => ingredients.find((ingredient) => ingredient._id === idItem)),\r\n    [order, ingredients]\r\n  );\r\n\r\n  const orderIngredients = useMemo(() => {\r\n    const orderIngredientsWDetailsGroups: Array<TGroupedIngredient> = [];\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    orderIngredientsWDetails?.length &&\r\n      orderIngredientsWDetails.forEach((elem) => {\r\n        const existingGroups = orderIngredientsWDetailsGroups.find((groupItem) => groupItem._id === elem?._id);\r\n        if (!existingGroups) {\r\n          const count = order.ingredients?.filter((item) => item === elem?._id).length || 0;\r\n          orderIngredientsWDetailsGroups.push({\r\n            ...elem,\r\n            count,\r\n          });\r\n        }\r\n      });\r\n\r\n    return orderIngredientsWDetailsGroups;\r\n  }, [order, orderIngredientsWDetails]);\r\n\r\n  const orderTotalPrice = useMemo(\r\n    () => orderIngredients.reduce((sum, item) => (sum + item.price * item.count), 0),\r\n    [orderIngredients]\r\n  );\r\n\r\n  if (!isLoaded && order?._id === id && orderTotalPrice) {\r\n    dispatch(\r\n      setViewOrder({\r\n        ...order,\r\n        groupedIngredients: orderIngredients,\r\n        ingredientsWDetails: orderIngredientsWDetails,\r\n        orderTotalPrice,\r\n      })\r\n    );\r\n  }\r\n\r\n  if (isFetching) {\r\n    return (\r\n      <h4 className={`text text_type_main-medium mt-4 mb-8 ${styles.wrapper}`}>  , ...</h4>\r\n    );\r\n  }\r\n  if (isLoaded && !order) {\r\n    return (\r\n      <h4 className={`text text_type_main-medium mt-4 mb-8 ${styles.wrapper}`}>\r\n            .  , ...\r\n      </h4>\r\n    );\r\n  }\r\n  if (order?._id !== id || !orderTotalPrice) {\r\n    return <h4 className={`text text_type_main-medium mt-4 mb-8 ${styles.wrapper}`}> , ...</h4>;\r\n  }\r\n\r\n  return (\r\n    <div className={`${styles.wrapper}`}>\r\n      <OrdersCardDetails />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageFeedCard;\r\n","import { EItemIcon, IItem } from \"../../redux/types\";\r\n\r\ninterface IDataMenu {\r\n  left: ReadonlyArray<IItem>;\r\n  right: ReadonlyArray<IItem>;\r\n}\r\n\r\nconst dataMenu: IDataMenu = {\r\n  left: [\r\n    {\r\n      id: \"1\",\r\n      name: \"\",\r\n      href: \"/\",\r\n      icon: EItemIcon.burgerIcon,\r\n      exact: true,\r\n    },\r\n    {\r\n      id: \"2\",\r\n      name: \" \",\r\n      href: \"/feed\",\r\n      icon: EItemIcon.listIcon,\r\n      exact: false,\r\n    },\r\n  ],\r\n  right: [\r\n    {\r\n      id: \"1\",\r\n      name: \" \",\r\n      href: \"/profile\",\r\n      icon: EItemIcon.profileIcon,\r\n      exact: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport default dataMenu;\r\n","import { BurgerIcon, ListIcon, ProfileIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { EItemIcon, IItem } from \"../../../redux/types/menu\";\r\nimport { useSelector } from \"../../../utils/hooks\";\r\nimport styles from \"./menu-item.module.css\";\r\n\r\nconst componentsIcon = {\r\n  burgerIcon: BurgerIcon,\r\n  listIcon: ListIcon,\r\n  profileIcon: ProfileIcon,\r\n};\r\n\r\ninterface IPropsMenuItem {\r\n  item: IItem;\r\n}\r\n\r\nconst MenuItem: FC<IPropsMenuItem> = ({ item }) => {\r\n  const { isAuthorized, user } = useSelector((store) => store.sign);\r\n  const MenuIcon = componentsIcon[item.icon];\r\n  return (\r\n    <li>\r\n      <NavLink\r\n        to={item.href}\r\n        className={`${styles.menu_link} pr-5 pl-5`}\r\n        activeClassName={styles.menu_link_active}\r\n        exact={item.exact}\r\n      >\r\n        <MenuIcon type=\"secondary\" />\r\n        <span className=\"text text_type_main-default pl-2\">\r\n          {/* eslint-disable-next-line no-nested-ternary */}\r\n          { isAuthorized ? (item.icon === EItemIcon.profileIcon ? (user.email) : (item.name)) : (item.name)}\r\n        </span>\r\n      </NavLink>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default MenuItem;\r\n","import { Logo } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport dataMenu from \"../../utils/data/data-menu\";\r\nimport styles from \"./app-header.module.css\";\r\nimport MenuItem from \"./menu-item/menu-item\";\r\n\r\nconst AppHeader: FC = () => (\r\n  <div className={`${styles.container} pt-4 pb-4 p`}>\r\n    <nav>\r\n      <ul className={styles.menu}>\r\n        {dataMenu.left.map((item) => (\r\n          <MenuItem item={item} key={item.id} />\r\n        ))}\r\n      </ul>\r\n    </nav>\r\n\r\n    <NavLink to=\"/\" title=\"Stellar burgers\" className={styles.logo}>\r\n      <Logo />\r\n    </NavLink>\r\n    <nav>\r\n      <ul className={styles.menu_right}>\r\n        {dataMenu.right.map((item) => (\r\n          <MenuItem item={item} key={item.id} />\r\n        ))}\r\n      </ul>\r\n    </nav>\r\n  </div>\r\n);\r\n\r\nexport default AppHeader;\r\n","import { ConstructorElement } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\n\r\nimport { TIngredient } from \"../../../redux/types\";\r\nimport styles from \"./burger-constructor-item.module.css\";\r\n\r\ninterface IConstructorItem {\r\n  itemData: TIngredient;\r\n  type: \"top\" | \"bottom\";\r\n  isLocked: boolean;\r\n}\r\n\r\nconst ConstructorItem: FC<IConstructorItem> = ({ itemData, type, isLocked }) => (\r\n  <li className={`${styles.item} mb-4 pl-8 pr-4'}`}>\r\n    <ConstructorElement\r\n      text={`${itemData.name} ${type === \"top\" ? \"()\" : \"\"} ${type === \"bottom\" ? \"()\" : \"\"} `}\r\n      thumbnail={itemData.image_mobile}\r\n      price={itemData.price}\r\n      type={type}\r\n      isLocked={isLocked}\r\n    />\r\n  </li>\r\n);\r\n\r\nexport default ConstructorItem;\r\n","import { ConstructorElement, DragIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { FC, useRef } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport { useDispatch } from \"../../../utils/hooks\";\r\n\r\nimport { DELETE_CONSTRUCTOR_INGREDIENT } from \"../../../redux/action-types\";\r\nimport { TId, TIngredient } from \"../../../redux/types\";\r\nimport { ITEM_TYPE } from \"../../../utils/constants\";\r\nimport styles from \"./burger-constructor-item-swap.module.css\";\r\n\r\nconst style = {\r\n  cursor: \"move\",\r\n};\r\n\r\ninterface IConstructorItemSwap {\r\n  itemData: TIngredient;\r\n  type?: \"top\" | \"bottom\";\r\n  isLocked?: boolean;\r\n  handlerId: TId;\r\n  index: number;\r\n  moveElem: (dragIndex: number, hoverIndex: number) => void;\r\n  id: TId;\r\n}\r\n\r\nconst ConstructorItemSwap: FC<IConstructorItemSwap> = ({ itemData, index, isLocked, type, moveElem, id }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleClose = () => dispatch({ type: DELETE_CONSTRUCTOR_INGREDIENT, payload: index });\r\n\r\n  const ref = useRef(null);\r\n\r\n  const [{ handlerId }, drop] = useDrop({\r\n    accept: ITEM_TYPE.FILLERS,\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      };\r\n    },\r\n    hover(item: { id: string; index: number }, monitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex: number = item.index;\r\n      const hoverIndex: number = index;\r\n\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset();\r\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n\r\n      moveElem(dragIndex, hoverIndex);\r\n\r\n      // eslint-disable-next-line no-param-reassign\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n  const [, drag] = useDrag({\r\n    type: ITEM_TYPE.FILLERS,\r\n    item: () => ({ id, index }),\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n  const opacity = 1;\r\n  drag(drop(ref));\r\n\r\n  return (\r\n    <li\r\n      className={`${styles.item} pb-4 ${isLocked ? \"pl-8 pr-4\" : \"pr-2\"}`}\r\n      ref={ref}\r\n      style={{ ...style, opacity }}\r\n      data-handler-id={handlerId}\r\n    >\r\n      {!isLocked && (\r\n        <span className={styles.drag_icon}>\r\n          <DragIcon type=\"secondary\" />\r\n        </span>\r\n      )}\r\n      <ConstructorElement\r\n        text={`${itemData.name} ${type === \"top\" ? \"()\" : \"\"} ${type === \"bottom\" ? \"()\" : \"\"} `}\r\n        thumbnail={itemData.image_mobile}\r\n        price={itemData.price}\r\n        isLocked={isLocked}\r\n        type={type}\r\n        handleClose={handleClose}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ConstructorItemSwap;\r\n","import { Button, CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\n\r\nimport { addConstructorIngredient, swapConstructorIngredient } from \"../../redux/actions\";\r\nimport ConstructorItem from \"./burger-constructor-item/burger-constructor-item\";\r\nimport ConstructorItemSwap from \"./burger-constructor-item-swap/burger-constructor-item-swap\";\r\nimport { TIngredient } from \"../../redux/types\";\r\nimport styles from \"./burger-constructor.module.css\";\r\n\r\ninterface IBurgerConstructor {\r\n  openModal: () => void;\r\n}\r\n\r\nconst BurgerConstructor: FC<IBurgerConstructor> = ({ openModal }) => {\r\n  const dispatch = useDispatch();\r\n  const cart = useSelector((state) => state.cart);\r\n  const prodData = [...cart.data];\r\n\r\n  const onDropHandler = (data: TIngredient) => dispatch(addConstructorIngredient(data));\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop: onDropHandler,\r\n  });\r\n\r\n  const coverData = Object.keys(cart.sortedData.bun).length > 0 ? [cart.sortedData.bun] : [cart.sortedData.empty];\r\n\r\n  const middleData = prodData && Array.isArray(prodData) && cart.sortedData.fillers;\r\n  const totalBurgerPrice = useMemo(\r\n    () =>\r\n      Array.isArray(prodData) && [...coverData, ...middleData, ...coverData].reduce((sum, item) => sum + item.price, 0),\r\n    [coverData, middleData]\r\n  );\r\n\r\n  const moveElem = (dragIndex: number, hoverIndex: number) =>\r\n    dispatch(swapConstructorIngredient(dragIndex, hoverIndex));\r\n\r\n  const renderMiddle = (item: TIngredient, indx: number) => (\r\n    <ConstructorItemSwap key={indx} itemData={item} handlerId={indx} moveElem={moveElem} index={indx} id={item._id} />\r\n  );\r\n\r\n  return (\r\n    <section className={`${styles.container} pt-25`} ref={dropTarget}>\r\n      <ul className={styles.item_list}>\r\n        {coverData &&\r\n          Array.isArray(coverData) &&\r\n          coverData.map((item) => <ConstructorItem key={item._id} itemData={item} type=\"top\" isLocked />)}\r\n        <li className=\"mb-4\" key=\"middle\">\r\n          <ul className={styles.scroll_list}>\r\n            {middleData &&\r\n              Array.isArray(middleData) &&\r\n              middleData.map((element, index) => renderMiddle(element, index))}\r\n          </ul>\r\n        </li>\r\n\r\n        {coverData &&\r\n          Array.isArray(coverData) &&\r\n          coverData.map((item) => <ConstructorItem key={item._id} itemData={item} type=\"bottom\" isLocked />)}\r\n      </ul>\r\n      <div className={`${styles.checkout_container} pr-8`}>\r\n        <div className=\"mr-10\">\r\n          <span className=\"text text_type_digits-medium mr-2\">{totalBurgerPrice}</span>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n        <Button type=\"primary\" size=\"large\" onClick={openModal}>\r\n           \r\n        </Button>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import { Counter, CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { TIngredient } from \"../../../redux/types\";\r\nimport styles from \"./burger-ingredient.module.css\";\r\n\r\nconst style = {\r\n  cursor: \"move\",\r\n};\r\n\r\ninterface IIngredientItem {\r\n  itemData: TIngredient;\r\n  itemCounter?: number;\r\n  onItemClick: () => void;\r\n}\r\n\r\nconst BurgerIngredient: FC<IIngredientItem> = ({ itemData, itemCounter, onItemClick }) => {\r\n  const history = useHistory();\r\n  const [{ isDragging }, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: itemData,\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n  function handleClick() {\r\n    onItemClick();\r\n    history.replace(`/ingredients/${itemData._id}`, { background: true });\r\n  }\r\n  const opacity = isDragging ? 0.2 : 1;\r\n\r\n  return (\r\n    <li\r\n      className={styles.item}\r\n      aria-hidden=\"true\"\r\n      role=\"presentation\"\r\n      onClick={handleClick}\r\n      ref={dragRef}\r\n      style={{ ...style, opacity }}\r\n    >\r\n      {itemCounter && itemCounter > 0 ? <Counter count={itemCounter} size=\"default\" /> : null}\r\n      <img src={itemData.image} className={`${styles.item_image}`} alt={itemData.name} />\r\n\r\n      <p className={`text text_type_digits-default ${styles.item_description} mt-1 mb-1`}>\r\n        <span className=\"mr-2\">{itemData.price}</span>\r\n        <CurrencyIcon type=\"secondary\" />\r\n      </p>\r\n\r\n      <h3 className={`text text_type_main-default ${styles.item_name}`}>{itemData.name}</h3>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredient;\r\n","import { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC, useEffect, useState } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nimport BurgerIngredient from \"./burger-ingredient/burger-ingredient\";\r\nimport { TId, EItemType } from \"../../redux/types\";\r\nimport styles from \"./burger-ingredients.module.css\";\r\n\r\ninterface IBurgerIngredients {\r\n  openModal: () => void;\r\n}\r\n\r\nconst BurgerIngredients: FC<IBurgerIngredients> = ({ openModal }) => {\r\n  const [currentTab, setCurrentTab] = useState(\"buns\");\r\n  const { cart, ingredients } = useSelector((state) => ({ cart: state.cart, ingredients: state.ingredients }));\r\n  const prodData = [...ingredients.data];\r\n\r\n  const [bunsRef, inViewBuns] = useInView({ threshold: 0 });\r\n  const [mainsRef, inViewFilling] = useInView({ threshold: 0 });\r\n  const [saucesRef, inViewSauces] = useInView({ threshold: 0 });\r\n  useEffect(() => {\r\n    if (inViewBuns) {\r\n      setCurrentTab(\"buns\");\r\n    } else if (inViewSauces) {\r\n      setCurrentTab(\"sauces\");\r\n    } else if (inViewFilling) {\r\n      setCurrentTab(\"mains\");\r\n    }\r\n  }, [inViewBuns, inViewFilling, inViewSauces]);\r\n\r\n  const setTab = (tab: string) => {\r\n    setCurrentTab(tab);\r\n    const element = document.getElementById(tab);\r\n    if (element) element.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n  const buhData = prodData && Array.isArray(prodData) && prodData.filter((item) => item.type === EItemType.typeBun);\r\n  const sauceData = prodData && Array.isArray(prodData) && prodData.filter((item) => item.type === EItemType.typeSauce);\r\n  const mainData = prodData && Array.isArray(prodData) && prodData.filter((item) => item.type === EItemType.typeMain);\r\n  const countItem = (itemId: TId) =>\r\n    cart.sortedData && cart.sortedData.fillers?.filter((item) => item._id === itemId).length;\r\n  const countItemBun = (itemId: TId) => cart.sortedData && cart.sortedData.bun?._id === itemId;\r\n\r\n  return (\r\n    <section className={`${styles.container}`}>\r\n      <div className={styles.header_tabs}>\r\n        <h2 className=\"text text_type_main-large mt-10 mb-5 \"> </h2>\r\n        <div className={`${styles.tabs}`}>\r\n          <Tab value=\"buns\" active={currentTab === \"buns\"} onClick={setTab}>\r\n            \r\n          </Tab>\r\n          <Tab value=\"sauces\" active={currentTab === \"sauces\"} onClick={setTab}>\r\n            \r\n          </Tab>\r\n          <Tab value=\"mains\" active={currentTab === \"mains\"} onClick={setTab}>\r\n            \r\n          </Tab>\r\n        </div>\r\n      </div>\r\n      <div className={`${styles.scroll_list} pr-4`}>\r\n        <section className={styles.sec_items} id=\"buns\" ref={bunsRef}>\r\n          <h2 className={`text text_type_main-medium ${styles.sec_title}`}></h2>\r\n          <ul className={`${styles.items_list}`}>\r\n            {buhData &&\r\n              Array.isArray(buhData) &&\r\n              buhData.map((item) => (\r\n                <BurgerIngredient\r\n                  key={item._id}\r\n                  itemData={item}\r\n                  onItemClick={openModal}\r\n                  itemCounter={countItemBun(item._id) ? 2 : 0}\r\n                />\r\n              ))}\r\n          </ul>\r\n        </section>\r\n        <section className={styles.sec_items} id=\"sauces\" ref={saucesRef}>\r\n          <h2 className={`text text_type_main-medium ${styles.sec_title}`}></h2>\r\n          <ul className={`${styles.items_list}`}>\r\n            {sauceData &&\r\n              Array.isArray(sauceData) &&\r\n              sauceData.map((item) => (\r\n                <BurgerIngredient\r\n                  key={item._id}\r\n                  itemData={item}\r\n                  onItemClick={openModal}\r\n                  itemCounter={countItem(item._id)}\r\n                />\r\n              ))}\r\n          </ul>\r\n        </section>\r\n        <section className={styles.sec_items} id=\"mains\" ref={mainsRef}>\r\n          <h2 className={`text text_type_main-medium ${styles.sec_title}`}></h2>\r\n          <ul className={`${styles.items_list}`}>\r\n            {mainData &&\r\n              Array.isArray(mainData) &&\r\n              mainData.map((item) => (\r\n                <BurgerIngredient\r\n                  key={item._id}\r\n                  itemData={item}\r\n                  onItemClick={openModal}\r\n                  itemCounter={countItem(item._id)}\r\n                />\r\n              ))}\r\n          </ul>\r\n        </section>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredients;\r\n","import { FC } from \"react\";\r\nimport styles from \"./ingredient-details-item.module.css\";\r\n\r\ninterface IIngredientDetailsItem {\r\n  title: string;\r\n  value: string | number;\r\n}\r\n\r\nconst IngredientDetailsItem: FC<IIngredientDetailsItem> = ({ title, value }) => (\r\n  <li className={styles.details_list_item}>\r\n    <p className=\"text text_type_main-default text_color_inactive\">{title}</p>\r\n    <p className=\"text text_type_digits-default text_color_inactive\">{value}</p>\r\n  </li>\r\n);\r\n\r\nexport default IngredientDetailsItem;\r\n","import { FC, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { setViewItem } from \"../../redux/actions\";\r\nimport { ITEM_DETAILS } from \"../../utils/constants\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\nimport styles from \"./ingredient-details.module.css\";\r\nimport IngredientDetailsItem from \"./ingredient-details-item/ingredient-details-item\";\r\n\r\ntype TParamTypes = {\r\n  id: string;\r\n};\r\n\r\nconst IngredientDetails: FC = () => {\r\n  const { id } = useParams<TParamTypes>();\r\n  const dispatch = useDispatch();\r\n  const ingredients = useSelector((state) => state.ingredients);\r\n\r\n  useEffect(() => {\r\n    const itemData = ingredients.data?.find((item) => item._id === id);\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    itemData && dispatch(setViewItem(itemData));\r\n  }, [id, ingredients.data]);\r\n\r\n  const viewedItem = useSelector((state) => state.viewedItem.data);\r\n\r\n  if (!viewedItem._id) {\r\n    return <h4 className=\"text text_type_main-medium mt-4 mb-8\"> ...</h4>;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <img src={viewedItem.image_large} alt={viewedItem.name} title={viewedItem.name} />\r\n      <h4 className=\"text text_type_main-medium mt-4 mb-8\">{viewedItem.name}</h4>\r\n      <ul className={`${styles.details_list} mb-15`}>\r\n        <IngredientDetailsItem title={ITEM_DETAILS.calories} value={viewedItem.calories} />\r\n        <IngredientDetailsItem title={ITEM_DETAILS.proteins} value={viewedItem.proteins} />\r\n        <IngredientDetailsItem title={ITEM_DETAILS.fat} value={viewedItem.fat} />\r\n        <IngredientDetailsItem title={ITEM_DETAILS.carbohydrates} value={viewedItem.carbohydrates} />\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IngredientDetails;\r\n","import { RESET_VIEW_ITEM, SET_VIEW_ITEM } from \"../action-types\";\r\nimport type { TIngredient } from \"../types/data\";\r\n\r\nexport interface ISetViewItem {\r\n  readonly type: typeof SET_VIEW_ITEM;\r\n  readonly payload: TIngredient;\r\n}\r\nexport interface IResetViewItem {\r\n  readonly type: typeof RESET_VIEW_ITEM;\r\n}\r\n\r\nexport type TViewedItemActions = ISetViewItem | IResetViewItem;\r\n\r\nexport const setViewItem = (data: TIngredient): TViewedItemActions => ({\r\n  type: SET_VIEW_ITEM,\r\n  payload: data,\r\n});\r\n\r\nexport const resetViewItem = (): TViewedItemActions => ({\r\n  type: RESET_VIEW_ITEM,\r\n});\r\n","import { FC } from \"react\";\r\n\r\nimport styles from \"./modal-overlay.module.css\";\r\n\r\ninterface IModalOverlay {\r\n  closeModal: () => void;\r\n}\r\n\r\nconst ModalOverlay: FC<IModalOverlay> = ({ closeModal }) => (\r\n  <div aria-hidden=\"true\" role=\"presentation\" className={styles.modal_overlay} onClick={closeModal} />\r\n);\r\n\r\nexport default ModalOverlay;\r\n","import { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\r\nimport styles from \"./modal.module.css\";\r\n\r\ninterface IModal {\r\n  modalTitle: string;\r\n  closeModal: () => void;\r\n}\r\n\r\nconst Modal: FC<IModal> = ({ children, closeModal, modalTitle }) => {\r\n  const closeModalByEscKey = (e: KeyboardEvent) => {\r\n    if (e.key === \"Escape\") closeModal();\r\n    e.stopImmediatePropagation();\r\n  };\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", closeModalByEscKey);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", closeModalByEscKey);\r\n    };\r\n  }, []);\r\n\r\n  const modalRoot = document.querySelector(\"#app-modals\");\r\n\r\n  return ReactDOM.createPortal(\r\n    <>\r\n      <ModalOverlay closeModal={closeModal} />\r\n      <section className={styles.modal}>\r\n        <div className={`${styles.header} pr-10 pt-10 pl-10`}>\r\n          <h2 className=\"text text_type_main-large \">{modalTitle}</h2>\r\n          <CloseIcon type=\"primary\" onClick={closeModal} />\r\n        </div>\r\n        {children}\r\n      </section>\r\n    </>,\r\n    modalRoot\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","export default __webpack_public_path__ + \"static/media/order-done.85c3a14d.svg\";","export default __webpack_public_path__ + \"static/media/spin-white.14e453b1.svg\";","import React, { FC } from \"react\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nimport orderDone from \"../../images/order-done.svg\";\r\nimport spinWhite from \"../../images/spin-white.svg\";\r\nimport styles from \"./order-details.module.css\";\r\n\r\nfunction leftFillNum(num: number, targetLength: number) {\r\n  return num.toString().padStart(targetLength, \"0\");\r\n}\r\n\r\nconst OrderDetails: FC = () => {\r\n  const order = useSelector((state) => state.order);\r\n  return (\r\n    <>\r\n      <h1 className=\"text text_type_digits-large mt-30\">{leftFillNum(order.numberOrd, 7)}</h1>\r\n      <p className=\"text text_type_main-medium mt-8\"> </p>\r\n      <img\r\n        className={`mt-15 ${styles.icon_done}`}\r\n        src={order.isFetching ? spinWhite : orderDone}\r\n        alt=\" \"\r\n      />\r\n      <p className=\"text text_type_main-default mt-15\">   </p>\r\n      <p className=\"text text_type_main-default text_color_inactive mt-2 mb-30\">\r\n            \r\n      </p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n","export default __webpack_public_path__ + \"static/media/icon-info.32ad1fe4.svg\";","import { FC } from \"react\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nimport orderInfo from \"../../images/icon-info.svg\";\r\n\r\nfunction leftFillNum(num: number, targetLength: number) {\r\n  return num.toString().padStart(targetLength, \"0\");\r\n}\r\n\r\nconst OrderFailed: FC = () => {\r\n  const order = useSelector((state) => state.order);\r\n  return (\r\n    <>\r\n      <h1 className=\"text text_type_digits-large mt-30\">{leftFillNum(0, 7)}</h1>\r\n      <p className=\"text text_type_main-medium mt-8\">-   </p>\r\n      <p className=\"text text_type_main-medium mt-8\">{order.error}</p>\r\n\r\n      <img className=\"mt-15\" src={orderInfo} alt=\"  \" />\r\n      <p className=\"text text_type_main-default mt-15\">     </p>\r\n      <p className=\"text text_type_main-default text_color_inactive mt-2 mb-30\">\r\n              \r\n      </p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderFailed;\r\n","import { AnyAction, Middleware, MiddlewareAPI } from \"redux\";\r\n\r\nimport {\r\n  WS_CONNECTION_CLOSED,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_STOP,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_GET_MESSAGE,\r\n  WS_SEND_MESSAGE,\r\n} from \"../action-types\";\r\nimport { wsAllConnectionError } from \"../actions\";\r\n\r\nexport const socketMiddleware =\r\n  (wsUrl: string): Middleware =>\r\n  (store: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next) => (action) => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n\r\n      if (type === WS_CONNECTION_START) {\r\n        socket = new WebSocket(wsUrl);\r\n      }\r\n\r\n      if (type === WS_CONNECTION_STOP) {\r\n        socket.close(1000, \"Page closed by user\");\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = (event) => {\r\n          dispatch({\r\n            type: WS_CONNECTION_SUCCESS,\r\n            payload: event,\r\n          });\r\n        };\r\n\r\n        socket.onerror = (event) => {\r\n          dispatch({\r\n            type: WS_CONNECTION_ERROR,\r\n            payload: event,\r\n          });\r\n        };\r\n\r\n        socket.onmessage = (event) => {\r\n          const { data } = event;\r\n          if (data?.includes(\"ping\")) {\r\n            socket.send(\"pong\");\r\n          }\r\n          const { success, message, orders, total, totalToday } = JSON.parse(data);\r\n          if (success) {\r\n            dispatch({\r\n              type: WS_GET_MESSAGE,\r\n              payload: {\r\n                orders,\r\n                total,\r\n                totalToday,\r\n              },\r\n            });\r\n          } else {\r\n            message && dispatch(wsAllConnectionError(message));\r\n          }\r\n        };\r\n\r\n        socket.onclose = (event) => {\r\n          dispatch({ type: WS_CONNECTION_CLOSED, payload: event });\r\n        };\r\n\r\n        if (type === WS_SEND_MESSAGE) {\r\n          socket.send(JSON.stringify(payload));\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n","import { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { format } from \"date-fns\";\r\nimport { FC, useMemo } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { setViewOrder } from \"../../redux/actions\";\r\nimport { EOrderStatus, TGroupedIngredient, TId, TOrder } from \"../../redux/types\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\nimport { formatDistanceDayToNow } from \"../../utils/utils\";\r\nimport styles from \"./orders-card.module.css\";\r\n\r\ninterface IOrdersCard {\r\n  order: TOrder;\r\n}\r\n\r\nconst OrdersCard: FC<IOrdersCard> = ({ order }) => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { wsConnected: cardOfProfile } = useSelector((store) => store.wsSign);\r\n  const { data: ingredients } = useSelector((store) => store.ingredients);\r\n\r\n  const orderIngredientsWDetails = useMemo(\r\n    () => order.ingredients?.map((id: TId) => ingredients.find((ingredient) => ingredient._id === id)),\r\n    [order, ingredients]\r\n  );\r\n\r\n  const orderIngredients = useMemo(() => {\r\n    const orderIngredientsWDetailsGroups: Array<TGroupedIngredient> = [];\r\n    orderIngredientsWDetails?.forEach(\r\n      (elem) => {\r\n        const existingGroups = orderIngredientsWDetailsGroups.find(groupItem => groupItem._id === elem?._id);\r\n        if (!existingGroups) {\r\n          const count = order?.ingredients.filter(id => id === elem?._id).length || 1;\r\n          orderIngredientsWDetailsGroups.push(\r\n            {\r\n              ...elem,\r\n              count\r\n            }\r\n          );\r\n        }\r\n      });\r\n\r\n    return orderIngredientsWDetailsGroups;\r\n  }, [order, orderIngredientsWDetails]);\r\n\r\n  const orderTotalPrice = useMemo(\r\n    () => orderIngredients.reduce((sum, item) => (sum + item.price * item.count), 0),\r\n    [orderIngredients]\r\n  );\r\n\r\n  const openOrderDetails = () => {\r\n    dispatch(setViewOrder(\r\n      {\r\n        ...order,\r\n        groupedIngredients: orderIngredients,\r\n        ingredientsWDetails: orderIngredientsWDetails,\r\n        orderTotalPrice\r\n      }\r\n    ));\r\n\r\n    history.replace(`${cardOfProfile ? '/profile/orders' : '/feed'}/${order._id}/${order.number}`, { background: true });\r\n\r\n  };\r\n\r\n  const createdAt = new Date(order.createdAt);\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.order_item} aria-hidden=\"true\" role=\"presentation\" onClick={openOrderDetails}>\r\n        <div className={styles.order_info}>\r\n          <p className={`text text_type_digits-default ${styles.order_number}`}>#{order.number}</p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">{`${formatDistanceDayToNow(\r\n            createdAt\r\n          )}, ${format(createdAt, \"HH:mm 'i-'z\")}`}</p>\r\n        </div>\r\n        <h2 className=\"text text_type_main-medium\">{order.name}</h2>\r\n        {cardOfProfile && (\r\n          <p className={`text text_type_main-default ${order.status === \"done\" ? styles.done : \"\"}`}>\r\n            {EOrderStatus[order.status]}\r\n          </p>\r\n        )}\r\n\r\n        <div className={styles.ingredients_info}>\r\n          <div className={styles.ingredients_list}>\r\n            {orderIngredients.map((ingredient, idx) => (\r\n              <div\r\n                className={styles.ingredient_wrapper}\r\n                /* eslint-disable-next-line react/no-array-index-key */\r\n                key={idx}\r\n                style={{ zIndex: orderIngredients.length - idx }}\r\n              >\r\n                <div className={styles.ingredient}>\r\n                  <img src={ingredient.image_mobile} width=\"64\" alt={ingredient.name} />\r\n                  {ingredient.count > 1 && (\r\n                    <div className={styles.count_wrapper}>\r\n                      <p className=\"text text_type_main-default\">{`+${ingredient.count - 1}`}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className={styles.ingredients_price}>\r\n            <p className=\"text text_type_digits-default\">{orderTotalPrice}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrdersCard;\r\n","import {FC, useEffect} from \"react\";\r\nimport { useDispatch, useSelector } from '../../utils/hooks';\r\n\r\nimport { wsSignClose, wsSignInit } from \"../../redux/actions\";\r\nimport OrdersCard from \"../orders-card/orders-card\";\r\nimport styles from \"./orders.module.css\";\r\n\r\nconst Orders: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { wsConnected, data } = useSelector((store) => store.wsSign);\r\n  const { orders } = data;\r\n  useEffect(() => {\r\n    dispatch(wsSignInit());\r\n    return () => {\r\n      dispatch(wsSignClose());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  if (!wsConnected)\r\n    return <h4 className=\"text text_type_main-medium mt-4 mb-8\">  , ...</h4>;\r\n  if (!orders?.length) return <h4 className=\"text text_type_main-medium mt-4 mb-8\">   ...</h4>;\r\n\r\n  return (\r\n    <div className={styles.orders_list}>\r\n      {orders?.slice(0).reverse().map((order) => order.ingredients?.length && <OrdersCard key={order._id} order={order} />)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n","import {\r\n  WS_SIGN_CONNECTION_CLOSED,\r\n  WS_SIGN_CONNECTION_ERROR,\r\n  WS_SIGN_CONNECTION_START,\r\n  WS_SIGN_CONNECTION_STOP,\r\n  WS_SIGN_CONNECTION_SUCCESS,\r\n  WS_SIGN_GET_MESSAGE,\r\n} from \"../action-types\";\r\nimport type { TOrderWSAll } from \"../types/data\";\r\n\r\nexport interface IWsSignConnectionSuccess {\r\n  readonly type: typeof WS_SIGN_CONNECTION_SUCCESS;\r\n}\r\nexport interface IWsSignConnectionError {\r\n  readonly type: typeof WS_SIGN_CONNECTION_ERROR;\r\n  readonly payload: string;\r\n}\r\nexport interface IWsSignConnectionClosed {\r\n  readonly type: typeof WS_SIGN_CONNECTION_CLOSED;\r\n}\r\nexport interface IWsSignGetMessage {\r\n  readonly type: typeof WS_SIGN_GET_MESSAGE;\r\n  readonly payload: TOrderWSAll;\r\n}\r\nexport interface IWsSignConnectionStart {\r\n  readonly type: typeof WS_SIGN_CONNECTION_START;\r\n}\r\nexport interface IWsSignConnectionStop {\r\n  readonly type: typeof WS_SIGN_CONNECTION_STOP;\r\n}\r\n\r\nexport type TWsSignActions =\r\n  | IWsSignConnectionSuccess\r\n  | IWsSignConnectionError\r\n  | IWsSignConnectionClosed\r\n  | IWsSignGetMessage\r\n  | IWsSignConnectionStart\r\n  | IWsSignConnectionStop;\r\n\r\nconst wsSignInit = (): TWsSignActions => ({\r\n  type: WS_SIGN_CONNECTION_START,\r\n});\r\n\r\nconst wsSignClose = (): TWsSignActions => ({\r\n  type: WS_SIGN_CONNECTION_STOP,\r\n});\r\n\r\nconst wsSignConnectionSuccess = (): TWsSignActions => ({\r\n  type: WS_SIGN_CONNECTION_SUCCESS,\r\n});\r\n\r\nconst wsSignConnectionError = (error: string): TWsSignActions => ({\r\n  type: WS_SIGN_CONNECTION_ERROR,\r\n  payload: error,\r\n});\r\n\r\nconst wsSignConnectionClosed = (): TWsSignActions => ({\r\n  type: WS_SIGN_CONNECTION_CLOSED,\r\n});\r\n\r\nconst wsSignGetMessage = (data: TOrderWSAll): TWsSignActions => ({\r\n  type: WS_SIGN_GET_MESSAGE,\r\n  payload: data,\r\n});\r\n\r\nexport {\r\n  wsSignClose,\r\n  wsSignConnectionClosed,\r\n  wsSignConnectionError,\r\n  wsSignConnectionSuccess,\r\n  wsSignGetMessage,\r\n  wsSignInit,\r\n};\r\n","import { FC } from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\ninterface IProtectedRoute {\r\n  path?: string | string[];\r\n  exact?: boolean;\r\n}\r\n\r\nconst ProtectedRoute: FC<IProtectedRoute> = ({ children, ...rest }) => {\r\n  const { isAuthorized } = useSelector((store) => store.sign);\r\n\r\n  return (\r\n    <Route\r\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isAuthorized ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import { Button, Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { FC, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport { getForgotPassword } from \"../../redux/actions\";\r\nimport { TSignDataForgoutPassword } from \"../../redux/types\";\r\nimport { INITIAL_FORM_FORGOT_PASSWD } from \"../../utils/constants\";\r\nimport { useDispatch } from \"../../utils/hooks\";\r\nimport styles from \"./sign-forgot-password.module.css\";\r\n\r\nconst SignForgotPassword: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const [form, setForm] = useState<TSignDataForgoutPassword>(INITIAL_FORM_FORGOT_PASSWD);\r\n\r\n  const onFieldChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name: fieldName, type, checked } = e.target;\r\n    const value = type === \"checkbox\" ? checked : e.target.value;\r\n    setForm((prev) => ({ ...prev, [fieldName]: value }));\r\n  };\r\n\r\n  const onReset = () => {\r\n    setForm(INITIAL_FORM_FORGOT_PASSWD);\r\n  };\r\n\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    dispatch(getForgotPassword(form, history));\r\n    e.preventDefault();\r\n    onReset();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.login}>\r\n      <h3 className={`${styles.title} text text_type_main-medium`}> </h3>\r\n      <form className={styles.form} onSubmit={onSubmit} noValidate>\r\n        <div className={styles.input_container}>\r\n          <Input onChange={onFieldChange} value={form.email} name=\"email\" size=\"default\" placeholder=\" e-mail\" />\r\n          <div className={styles.button_container}>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              \r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <div className={styles.link_container}>\r\n        <p className={`${styles.text} text text_type_main-default text_color_inactive`}> ?</p>\r\n        <Link to=\"/login\" className={`${styles.link} text text_type_main-default`}>\r\n          \r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignForgotPassword;\r\n","import { Button, Input, PasswordInput } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { FC, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { getLogin } from \"../../redux/actions\";\r\nimport { TSignDataLogin } from \"../../redux/types\";\r\nimport { INITIAL_FORM_LOGIN } from \"../../utils/constants\";\r\nimport { useDispatch } from \"../../utils/hooks\";\r\nimport styles from \"./sign-login.module.css\";\r\n\r\nconst SignLogin: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const [form, setForm] = useState<TSignDataLogin>(INITIAL_FORM_LOGIN);\r\n  const onFieldChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name: fieldName, type, checked } = e.target;\r\n    const value = type === \"checkbox\" ? checked : e.target.value;\r\n    setForm((prev) => ({ ...prev, [fieldName]: value }));\r\n  };\r\n\r\n  const onReset = () => {\r\n    setForm(INITIAL_FORM_LOGIN);\r\n  };\r\n\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    dispatch(getLogin(form));\r\n    e.preventDefault();\r\n    onReset();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.login}>\r\n      <h3 className={`${styles.title} text text_type_main-medium`}></h3>\r\n      <form className={styles.form} onSubmit={onSubmit}>\r\n        <div className={styles.input_container}>\r\n          <Input onChange={onFieldChange} value={form.email} name=\"email\" size=\"default\" placeholder=\"E-mail\" />\r\n          <PasswordInput onChange={onFieldChange} value={form.password} name=\"password\" size=\"default\" />\r\n          <div className={styles.button_container}>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              \r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <div className={styles.link_container}>\r\n        <p className={`${styles.text} text text_type_main-default text_color_inactive`}>   ?</p>\r\n        <Link to=\"/register\" className={`${styles.link} text text_type_main-default`}>\r\n          \r\n        </Link>\r\n      </div>\r\n      <div className={styles.link_container}>\r\n        <p className={`${styles.text} text text_type_main-default text_color_inactive`}> ?</p>\r\n        <Link to=\"/forgot-password\" className={`${styles.link} text text_type_main-default`}>\r\n           \r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignLogin;\r\n","import { Button, EmailInput, Input, PasswordInput } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { FC, useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\n\r\nimport { updateProfile } from \"../../redux/actions\";\r\nimport { INITIAL_FORM_PROFILE } from \"../../utils/constants\";\r\nimport styles from \"./sign-profile.module.css\";\r\n\r\nconst SignProfile: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const [form, setForm] = useState(INITIAL_FORM_PROFILE);\r\n  const { isAuthorized, user, lastUpdated, isFetching } = useSelector((store) => store.sign);\r\n\r\n  useEffect(() => {\r\n    setForm((prev) => ({ ...prev, ...user }));\r\n  }, [isAuthorized, lastUpdated]);\r\n\r\n  const onFieldChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name: fieldName, type, checked } = e.target;\r\n    const value = type === \"checkbox\" ? checked : e.target.value;\r\n    setForm((prev) => ({ ...prev, [fieldName]: value }));\r\n  };\r\n\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    dispatch(updateProfile(form));\r\n    e.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <form className={styles.form} onSubmit={onSubmit}>\r\n      <Input\r\n        type=\"text\"\r\n        placeholder=\"\"\r\n        onChange={onFieldChange}\r\n        value={form.name}\r\n        icon=\"EditIcon\"\r\n        name=\"name\"\r\n        size=\"default\"\r\n      />\r\n      <EmailInput onChange={onFieldChange} value={form.email} name=\"email\" />\r\n\r\n      <PasswordInput onChange={onFieldChange} value={form.password} name=\"password\" />\r\n      <div className={styles.button_container}>\r\n        <Button type=\"primary\" size=\"medium\">\r\n          {isFetching ? \" \" : \"\"}\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SignProfile;\r\n","import React, { FC } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport styles from \"./sign-profile-nav.module.css\";\r\n\r\nconst ProfileNav: FC = () => (\r\n  <nav className={styles.nav__list}>\r\n    <NavLink\r\n      to=\"/profile\"\r\n      exact\r\n      className={`${styles.menu_link} text text_type_main-medium `}\r\n      activeClassName={styles.menu_link_active}\r\n    >\r\n      \r\n    </NavLink>\r\n    <NavLink\r\n      to=\"/profile/orders\"\r\n      className={`${styles.menu_link} text text_type_main-medium `}\r\n      activeClassName={styles.menu_link_active}\r\n    >\r\n       \r\n    </NavLink>\r\n    <NavLink\r\n      to=\"/profile/logout\"\r\n      className={`${styles.menu_link} text text_type_main-medium `}\r\n      activeClassName={styles.menu_link_active}\r\n    >\r\n      \r\n    </NavLink>\r\n  </nav>\r\n);\r\n\r\nexport default ProfileNav;\r\n","import {Button, Input, PasswordInput} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, {FC, useState} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport {getRegister} from \"../../redux/actions\";\r\nimport {TSignDataWPassword} from \"../../redux/types\";\r\nimport {INITIAL_FORM_REGISTER} from \"../../utils/constants\";\r\nimport { useDispatch } from '../../utils/hooks';\r\nimport styles from \"./sign-register.module.css\"\r\n\r\nconst SignRegister: FC = () => {\r\n\r\n  const dispatch = useDispatch();\r\n  const [form, setForm] = useState<TSignDataWPassword>(INITIAL_FORM_REGISTER);\r\n\r\n  const onFieldChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name: fieldName, type, checked } = e.target;\r\n    const value = type === 'checkbox' ? checked : e.target.value;\r\n    setForm(prev => ({ ...prev, [fieldName]: value }));\r\n  };\r\n\r\n  const onReset = () => {\r\n    setForm(INITIAL_FORM_REGISTER);\r\n  }\r\n\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    dispatch(getRegister(form));\r\n    e.preventDefault();\r\n\r\n    onReset();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.login}>\r\n      <h3 className={`${styles.title} text text_type_main-medium`}></h3>\r\n      <form className={styles.form} onSubmit={onSubmit} >\r\n        <div className={styles.input_container}>\r\n          <Input onChange={onFieldChange} value={form.name} name=\"name\" size=\"default\" placeholder=\"\" />\r\n          <Input onChange={onFieldChange} value={form.email} name=\"email\" size=\"default\" placeholder=\"E-mail\" />\r\n          <PasswordInput onChange={onFieldChange} value={form.password} name=\"password\" size=\"default\" />\r\n          <div className={styles.button_container}>\r\n            <Button type=\"primary\" size=\"medium\"></Button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <div className={styles.link_container}>\r\n        <p className={`${styles.text} text text_type_main-default text_color_inactive`}>\r\n           ?\r\n        </p>\r\n        <Link to=\"/login\" className={`${styles.link} text text_type_main-default`}>\r\n          \r\n        </Link>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignRegister;","import { Button, Input, PasswordInput } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { FC, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, Redirect, useHistory, useLocation } from \"react-router-dom\";\r\n\r\nimport { getResetPassword } from \"../../redux/actions\";\r\nimport { TSignDataLogResetPassword } from \"../../redux/types\";\r\nimport { INITIAL_FORM_RESET_PASSWD } from \"../../utils/constants\";\r\nimport styles from \"./sign-reset-password.module.css\";\r\n\r\ninterface ILocation extends Location {\r\n  resetPassword: string;\r\n}\r\n\r\nconst SignResetPassword: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation<ILocation>();\r\n  const [form, setForm] = useState<TSignDataLogResetPassword>(INITIAL_FORM_RESET_PASSWD);\r\n\r\n  const onFieldChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name: fieldName, type, checked } = e.target;\r\n    const value = type === \"checkbox\" ? checked : e.target.value;\r\n    setForm((prev) => ({ ...prev, [fieldName]: value }));\r\n  };\r\n\r\n  const onReset = () => {\r\n    setForm(INITIAL_FORM_RESET_PASSWD);\r\n  };\r\n\r\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n    dispatch(getResetPassword(form, history));\r\n    e.preventDefault();\r\n    onReset();\r\n  };\r\n\r\n  if (history.action === \"PUSH\" && location.state?.resetPassword) {\r\n    return (\r\n      <div className={styles.login}>\r\n        <h3 className={`${styles.title} text text_type_main-medium`}> </h3>\r\n        <form className={styles.form} onSubmit={onSubmit}>\r\n          <div className={styles.input_container}>\r\n            <PasswordInput onChange={onFieldChange} value={form.password} name=\"password\" size=\"default\" />\r\n            <Input\r\n              onChange={onFieldChange}\r\n              value={form.token}\r\n              name=\"token\"\r\n              size=\"default\"\r\n              placeholder=\"   \"\r\n            />\r\n            <div className={styles.button_container}>\r\n              <Button type=\"primary\" size=\"medium\">\r\n                \r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <div className={styles.link_container}>\r\n          <p className={`${styles.text} text text_type_main-default text_color_inactive`}> ?</p>\r\n          <Link to=\"/login\" className={`${styles.link} text text_type_main-default`}>\r\n            \r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return <Redirect to=\"/login\" />;\r\n};\r\n\r\nexport default SignResetPassword;\r\n","import { FC } from \"react\";\r\nimport { Redirect, Route, useLocation } from \"react-router-dom\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\ninterface ISignRoute {\r\n  path?: string | string[];\r\n  exact?: boolean;\r\n}\r\n\r\ninterface ILocation extends Location {\r\n  from: {\r\n    pathname: string;\r\n  };\r\n}\r\n\r\nconst SignRoute: FC<ISignRoute> = ({ children, ...rest }) => {\r\n  const { isAuthorized } = useSelector((store) => store.sign);\r\n  const location = useLocation<ILocation>();\r\n  return (\r\n    <Route\r\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\r\n      {...rest}\r\n      render={() =>\r\n        isAuthorized ? (\r\n          <Redirect\r\n            to={{\r\n              pathname: location.state?.from ? location.state?.from.pathname : \"/\",\r\n            }}\r\n          />\r\n        ) : (\r\n          children\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default SignRoute;\r\n","import { FC, useEffect, useMemo } from \"react\";\r\n\r\nimport { wsAllClose, wsAllInit } from \"../../redux/actions\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\n// eslint-disable-next-line import/no-cycle\r\nimport { OrdersCard } from \"..\";\r\nimport styles from \"./orders-feed.module.css\";\r\n\r\nconst OrdersFeed: FC = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { data, wsConnected } = useSelector((store) => store.wsAll);\r\n\r\n  useEffect(() => {\r\n    dispatch(wsAllInit());\r\n    return () => {\r\n      dispatch(wsAllClose());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const { orders, total, totalToday } = data;\r\n  const doneOrders = useMemo(() => orders?.filter((order) => order.status === \"done\"), [orders]);\r\n  const pendingOrders = useMemo(() => orders?.filter((order) => order.status === \"pending\"), [orders]);\r\n\r\n  if (!wsConnected) return <h4 className=\"text text_type_main-medium mt-4 mb-8\">  , ...</h4>;\r\n  if (!orders?.length) return <h4 className=\"text text_type_main-medium mt-4 mb-8\">    ...</h4>;\r\n\r\n  return (\r\n    <>\r\n      <h1 className={`text text_type_main-large ${styles.header}`}> </h1>\r\n      <div className={styles.content_wrapper}>\r\n        <div className={styles.order_list}>\r\n          {orders.map((order) => order.ingredients?.length && <OrdersCard key={order._id} order={order} />)}\r\n        </div>\r\n\r\n        <div className={styles.info_wrapper}>\r\n          <div className={styles.info_table}>\r\n            <div className={styles.done}>\r\n              <h2 className=\"text text_type_main-medium\">:</h2>\r\n              <ul className={styles.list}>\r\n                {doneOrders.map((doneOrder) => (\r\n                  <li\r\n                    key={doneOrder._id}\r\n                    className={`text text_type_digits-default ${styles.list_item} ${styles.list_item_done}`}\r\n                  >\r\n                    {doneOrder.number}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n            <div className={styles.progress}>\r\n              <h2 className=\"text text_type_main-medium\"> :</h2>\r\n              <ul className={styles.list}>\r\n                {pendingOrders.map((pendingOrder) => (\r\n                  <li key={pendingOrder._id} className={`text text_type_digits-default ${styles.list_item}`}>\r\n                    {pendingOrder.number}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div className={styles.total_count}>\r\n            <h2 className=\"text text_type_main-medium\">   :</h2>\r\n            <p className={`text text_type_digits-large ${styles.count}`}>{total}</p>\r\n          </div>\r\n          <div className={styles.today_count}>\r\n            <h2 className=\"text text_type_main-medium\">  :</h2>\r\n            <p className={`text text_type_digits-large ${styles.count}`}>{totalToday}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrdersFeed;\r\n","import {\r\n  WS_CONNECTION_CLOSED,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_STOP,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_GET_MESSAGE,\r\n} from \"../action-types\";\r\nimport type { TOrderWSAll } from \"../types/data\";\r\n\r\nexport interface IWsConnectionSuccess {\r\n  readonly type: typeof WS_CONNECTION_SUCCESS;\r\n}\r\nexport interface IWsConnectionError {\r\n  readonly type: typeof WS_CONNECTION_ERROR;\r\n  readonly payload: string;\r\n}\r\nexport interface IWsConnectionClosed {\r\n  readonly type: typeof WS_CONNECTION_CLOSED;\r\n}\r\nexport interface IWsGetMessage {\r\n  readonly type: typeof WS_GET_MESSAGE;\r\n  readonly payload: TOrderWSAll;\r\n}\r\nexport interface IWsConnectionStart {\r\n  readonly type: typeof WS_CONNECTION_START;\r\n}\r\nexport interface IWsConnectionStop {\r\n  readonly type: typeof WS_CONNECTION_STOP;\r\n}\r\n\r\nexport type TWsAllActions =\r\n  | IWsConnectionSuccess\r\n  | IWsConnectionError\r\n  | IWsConnectionClosed\r\n  | IWsGetMessage\r\n  | IWsConnectionStart\r\n  | IWsConnectionStop;\r\n\r\nconst wsAllInit = (): TWsAllActions => ({\r\n  type: WS_CONNECTION_START,\r\n});\r\n\r\nconst wsAllClose = (): TWsAllActions => ({\r\n  type: WS_CONNECTION_STOP,\r\n});\r\n\r\nconst wsAllConnectionSuccess = (): TWsAllActions => ({\r\n  type: WS_CONNECTION_SUCCESS,\r\n});\r\n\r\nconst wsAllConnectionError = (error: string): TWsAllActions => ({\r\n  type: WS_CONNECTION_ERROR,\r\n  payload: error,\r\n});\r\n\r\nconst wsAllConnectionClosed = (): TWsAllActions => ({\r\n  type: WS_CONNECTION_CLOSED,\r\n});\r\n\r\nconst wsAllGetMessage = (data: TOrderWSAll): TWsAllActions => ({\r\n  type: WS_GET_MESSAGE,\r\n  payload: data,\r\n});\r\n\r\nexport { wsAllClose,wsAllConnectionClosed, wsAllConnectionError, wsAllConnectionSuccess, wsAllGetMessage, wsAllInit };\r\n","import { FC } from \"react\";\r\n\r\n// eslint-disable-next-line import/no-cycle\r\nimport OrdersFeed from \"../../components/orders-feed/orders-feed\";\r\nimport styles from \"./page-feed-orders.module.css\";\r\n\r\nconst PageFeedOrders: FC = () => (\r\n  <div className={styles.wrapper}>\r\n    <OrdersFeed />\r\n  </div>\r\n);\r\n\r\nexport default PageFeedOrders;\r\n","import { FC } from \"react\";\r\n\r\nimport SignLogin from \"../../components/sign-login/sign-login\";\r\nimport styles from \"./page-login.module.css\";\r\n\r\nconst PageLogin: FC = () => (\r\n  <div className={styles.wrapper}>\r\n    <SignLogin />\r\n  </div>\r\n);\r\n\r\nexport default PageLogin;\r\n","import React, { FC } from \"react\";\r\n\r\nimport IngredientDetails from \"../../components/ingredient-details/ingredient-details\";\r\nimport styles from \"./page-ingredient.module.css\";\r\n\r\nconst IngredientPage: FC = () => (\r\n  <div className={styles.wrapper}>\r\n    <h1 className={styles.title}> </h1>\r\n    <IngredientDetails />\r\n  </div>\r\n);\r\n\r\nexport default IngredientPage;\r\n","import React, { FC,useState } from \"react\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { Route, Switch, useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\r\n\r\n// eslint-disable-next-line import/no-cycle\r\nimport {\r\n  BurgerConstructor,\r\n  BurgerIngredients,\r\n  IngredientDetails,\r\n  Modal,\r\n  OrderDetails,\r\n  OrderFailed,\r\n} from \"../../components\";\r\nimport { getOrderNumber, resetViewItem,setOrderError } from \"../../redux/actions\";\r\nimport { useDispatch,useSelector } from '../../utils/hooks';\r\nimport IngredientPage from \"../page-ingredient/page-ingredient\";\r\nimport styles from \"./page-main.module.css\";\r\n\r\nconst HomePage: FC = () => {\r\n  const dispatch = useDispatch();\r\n  // eslint-disable-next-line @typescript-eslint/no-shadow\r\n  const state = useSelector(state => state.ingredients);\r\n  // eslint-disable-next-line @typescript-eslint/no-shadow\r\n  const cart = useSelector(state => state.cart);\r\n  const [visibleOrderDetails, setVisibleOrderDetails] = useState(false);\r\n  const [visibleOrderFailed, setVisibleOrderFailed] = useState(false);\r\n  const [visibleIngredientDetails, setVisibleIngredientDetails] = useState(false);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const { isAuthorized } = useSelector((store) => store.sign);\r\n\r\n  const openModalOrderDetails = () => {\r\n    if (isAuthorized) {\r\n      if (cart.sortedData.fillers.length > 0 && Object.keys(cart.sortedData.bun).length > 0) {\r\n        const idsCard = cart.sortedData.fillers.map((item) => item._id);\r\n        dispatch(getOrderNumber(idsCard));\r\n        setVisibleOrderDetails(true);\r\n      } else {\r\n        dispatch(setOrderError(\" \"));\r\n        setVisibleOrderFailed(true);\r\n      }\r\n    } else {\r\n      history.push(`/login`, { from: location });\r\n    }\r\n  };\r\n  const openModalIngredientDetails = () => {\r\n    setVisibleIngredientDetails(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    visibleOrderDetails && setVisibleOrderDetails(false);\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    visibleIngredientDetails && dispatch(resetViewItem());\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    visibleIngredientDetails && setVisibleIngredientDetails(false);\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    visibleOrderFailed && setVisibleOrderFailed(false);\r\n  };\r\n\r\n  const match = useRouteMatch(\"/ingredients/:id\");\r\n  if (history.action === \"POP\" && match && match.isExact) {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/ingredients/:id\">\r\n          <IngredientPage />\r\n        </Route>\r\n      </Switch>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      {state.data && state.data.length > 0 && (\r\n        <DndProvider backend={HTML5Backend}>\r\n          <main className={styles.main}>\r\n            <BurgerIngredients openModal={openModalIngredientDetails} />\r\n            {cart.data.length > 0 && <BurgerConstructor openModal={openModalOrderDetails} />}\r\n          </main>\r\n        </DndProvider>\r\n      )}\r\n      {visibleOrderDetails && (\r\n        <Modal modalTitle={null} closeModal={closeModal}>\r\n          <OrderDetails />\r\n        </Modal>\r\n      )}\r\n      {visibleOrderFailed && (\r\n        <Modal modalTitle={null} closeModal={closeModal}>\r\n          <OrderFailed />\r\n        </Modal>\r\n      )}\r\n      {visibleIngredientDetails && (\r\n        <Modal modalTitle=\" \" closeModal={closeModal}>\r\n          <IngredientDetails />\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import { FC, useEffect, useState } from \"react\";\r\nimport { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\r\n\r\nimport Orders from \"../../components/orders/orders\";\r\nimport SignProfile from \"../../components/sign-profile/sign-profile\";\r\nimport ProfileNav from \"../../components/sign-profile-nav/sign-profile-nav\";\r\nimport { getLogout, getProfile } from \"../../redux/actions\";\r\nimport { PROFILE_NAV_TEXT } from \"../../utils/constants\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\nimport { getRefreshToken } from \"../../utils/token\";\r\nimport styles from \"./page-profile.module.css\";\r\n\r\nconst PageProfile: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const { isAuthorized } = useSelector((store) => store.sign);\r\n  const [navText, setNavText] = useState(PROFILE_NAV_TEXT.profile);\r\n  useEffect(() => {\r\n    dispatch(getProfile());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // eslint-disable-next-line default-case\r\n    switch (location.pathname) {\r\n      case \"/profile/logout\": {\r\n        const token = getRefreshToken();\r\n        if (token) {\r\n          dispatch(getLogout(token));\r\n          history.push(\"/login\");\r\n        }\r\n        break;\r\n      }\r\n\r\n      case \"/profile/orders\": {\r\n        setNavText(PROFILE_NAV_TEXT.orders);\r\n        break;\r\n      }\r\n\r\n      case \"/profile\": {\r\n        setNavText(PROFILE_NAV_TEXT.profile);\r\n        break;\r\n      }\r\n    }\r\n  }, [location]);\r\n\r\n  if (!isAuthorized) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.profile}>\r\n        <div className={styles.nav_container}>\r\n          <ProfileNav />\r\n          <p className={`${styles.nav__text} text text_type_main-default text_color_inactive`}>{navText}</p>\r\n        </div>\r\n        <Switch>\r\n          <Route path=\"/profile/orders\">\r\n            <Orders />\r\n          </Route>\r\n          <Route path=\"/profile\">\r\n            <SignProfile />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageProfile;\r\n","import {FC} from \"react\";\r\n\r\nimport SignRegister from \"../../components/sign-register/sign-register\";\r\nimport styles from \"./page-register.module.css\"\r\n\r\nconst PageRegister: FC = () => (\r\n  <div className={styles.wrapper}>\r\n    <SignRegister />\r\n  </div>\r\n);\r\n\r\nexport default PageRegister;\r\n","import { FC } from \"react\";\r\n\r\nimport SignResetPassword from \"../../components/sign-reset-password/sign-reset-password\";\r\nimport styles from \"./page-reset-password.module.css\";\r\n\r\nconst PageResetPassword: FC = () => (\r\n  <div className={styles.wrapper}>\r\n    <SignResetPassword />\r\n  </div>\r\n);\r\n\r\nexport default PageResetPassword;\r\n","import { FC, useEffect, useMemo } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"../../utils/hooks\";\r\n\r\nimport OrdersCardDetails from \"../../components/orders-card-details/orders-card-details\";\r\nimport { getOrderDetails, setViewOrder } from \"../../redux/actions\";\r\nimport { TGroupedIngredient, TId } from \"../../redux/types\";\r\nimport styles from \"./page-order-history.module.css\";\r\n\r\ninterface IParams {\r\n  id: string;\r\n  number: string;\r\n}\r\n\r\nconst OrdersCardDetailsPage: FC = () => {\r\n  const { id, number } = useParams<IParams>();\r\n  const dispatch = useDispatch();\r\n  const { data: ingredients } = useSelector((store) => store.ingredients);\r\n  const { isLoaded, isFetching, data: order } = useSelector((store) => store.viewedOrder);\r\n\r\n  useEffect(() => {\r\n    dispatch(getOrderDetails(number));\r\n  }, [dispatch]);\r\n\r\n  const orderIngredientsWDetails = useMemo(\r\n    () => order?.ingredients?.map((idItem) => ingredients.find((ingredient) => ingredient._id === idItem)),\r\n    [order, ingredients]\r\n  );\r\n\r\n  const orderIngredients = useMemo(() => {\r\n    const orderIngredientsDetailsGroups: Array<TGroupedIngredient> = [];\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    orderIngredientsWDetails?.length &&\r\n      orderIngredientsWDetails.forEach((elem) => {\r\n        const existingGroups = orderIngredientsDetailsGroups.find((groupItem) => groupItem._id === elem?._id);\r\n        if (!existingGroups) {\r\n          const count = order.ingredients?.filter((item: TId) => item === elem?._id).length || 0;\r\n          orderIngredientsDetailsGroups.push({\r\n            ...elem,\r\n            count,\r\n          });\r\n        }\r\n      });\r\n\r\n    return orderIngredientsDetailsGroups;\r\n  }, [order, orderIngredientsWDetails]);\r\n\r\n  const orderTotalPrice = useMemo(\r\n    () => orderIngredients.reduce((sum, item) => (sum + item.price), 0),\r\n    [orderIngredients]\r\n  );\r\n\r\n  if (!isLoaded && order?._id === id && orderTotalPrice) {\r\n    dispatch(\r\n      setViewOrder({\r\n        ...order,\r\n        groupedIngredients: orderIngredients,\r\n        ingredientsWDetails: orderIngredientsWDetails,\r\n        orderTotalPrice,\r\n      })\r\n    );\r\n  }\r\n\r\n  if (isFetching) {\r\n    return (\r\n      <h4 className={`text text_type_main-medium mt-4 mb-8 ${styles.wrapper}`}>  , ...</h4>\r\n    );\r\n  }\r\n  if (isLoaded && !order) {\r\n    return (\r\n      <h4 className={`text text_type_main-medium mt-4 mb-8 ${styles.wrapper}`}>\r\n            .  , ...\r\n      </h4>\r\n    );\r\n  }\r\n  if (order?._id !== id || !orderTotalPrice) {\r\n    return <h4 className={`text text_type_main-medium mt-4 mb-8 ${styles.wrapper}`}> , ...</h4>;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <OrdersCardDetails />\r\n    </div>\r\n  );\r\n};\r\nexport default OrdersCardDetailsPage;\r\n","import {FC} from \"react\";\r\nimport SignForgotPassword from \"../../components/sign-forgot-password/sign-forgot-password\";\r\nimport styles from \"./page-forgot-password.module.css\"\r\n\r\nconst PageForgotPassword: FC = () => (\r\n  <div className={styles.wrapper}>\r\n    <SignForgotPassword />\r\n  </div>\r\n);\r\n\r\nexport default PageForgotPassword;\r\n","import { FC, useEffect } from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\n\r\n// eslint-disable-next-line import/no-cycle\r\nimport {\r\n  Page404,\r\n  PageFeedCard,\r\n  PageFeedOrders,\r\n  PageForgotPassword,\r\n  PageLogin,\r\n  PageMain,\r\n  PageOrderHistory,\r\n  PageProfile,\r\n  PageRegister,\r\n  PageResetPassword,\r\n} from \"../../pages\";\r\nimport { getIngredients, getProfile } from \"../../redux/actions\";\r\nimport { useDispatch } from \"../../utils/hooks\";\r\nimport AppHeader from \"../app-header/app-header\";\r\nimport ProtectedRoute from \"../protected-route/protected-route\";\r\nimport SignRoute from \"../sign-route/sign-route\";\r\nimport styles from \"./app.module.css\";\r\n\r\nconst App: FC = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getProfile());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredients());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <header className={styles.nav_panel}>\r\n        <AppHeader />\r\n      </header>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <PageMain />\r\n        </Route>\r\n        <Route path=\"/feed/:id/:number\">\r\n          <PageFeedCard />\r\n        </Route>\r\n        <Route path=\"/feed/:id\">\r\n          <PageFeedCard />\r\n        </Route>\r\n        <Route exact path=\"/feed\">\r\n          <PageFeedOrders />\r\n        </Route>\r\n        <SignRoute path=\"/login\">\r\n          <PageLogin />\r\n        </SignRoute>\r\n        <SignRoute path=\"/register\">\r\n          <PageRegister />\r\n        </SignRoute>\r\n        <SignRoute path=\"/forgot-password\">\r\n          <PageForgotPassword />\r\n        </SignRoute>\r\n        <SignRoute path=\"/reset-password\">\r\n          <PageResetPassword />\r\n        </SignRoute>\r\n        <ProtectedRoute path=\"/profile/orders/:id/:number\" exact>\r\n          <PageOrderHistory />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile/orders/:id\" exact>\r\n          <PageOrderHistory />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile\">\r\n          <PageProfile />\r\n        </ProtectedRoute>\r\n        <Route path=\"/ingredients/:id\">\r\n          <PageMain />\r\n        </Route>\r\n        <Route>\r\n          <Page404 />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {\r\n  ADD_CONSTRUCTOR_INGREDIENT,\r\n  DELETE_CONSTRUCTOR_INGREDIENT,\r\n  GET_CONSTRUCTOR_INGREDIENT,\r\n  RESET_CONSTRUCTOR,\r\n  SWAP_CONSTRUCTOR_INGREDIENT,\r\n} from \"../action-types\";\r\nimport type { TConstructorActions } from \"../actions\";\r\nimport type { TIngredient } from \"../types/data\";\r\n\r\ntype TConstructorState = {\r\n  data: ReadonlyArray<TIngredient>;\r\n  sortedData: {\r\n    bun: Readonly<TIngredient>;\r\n    fillers: Array<TIngredient>;\r\n    empty: Readonly<TIngredient>;\r\n  };\r\n  total: number;\r\n  lastUpdated: number | null;\r\n};\r\n\r\nexport const initialState: TConstructorState = {\r\n  data: [],\r\n  sortedData: {\r\n    bun: {} as TIngredient,\r\n    fillers: [],\r\n    empty: {} as TIngredient,\r\n  },\r\n\r\n  total: 0,\r\n  lastUpdated: null,\r\n};\r\n\r\nexport const constructorReducer = (state = initialState, action: TConstructorActions): TConstructorState => {\r\n  switch (action.type) {\r\n    case ADD_CONSTRUCTOR_INGREDIENT: {\r\n      let sortedData = { ...state.sortedData };\r\n      if (action.payload.type === \"empty\") {\r\n        sortedData = { ...sortedData, empty: action.payload };\r\n      } else if (action.payload.type === \"bun\") {\r\n        sortedData = { ...sortedData, bun: action.payload };\r\n      } else {\r\n        sortedData = { ...sortedData, fillers: [...sortedData.fillers, action.payload] };\r\n      }\r\n      return {\r\n        ...state,\r\n        data: [...state.data, action.payload],\r\n        sortedData,\r\n      };\r\n    }\r\n    case DELETE_CONSTRUCTOR_INGREDIENT: {\r\n      const sortedData = { ...state.sortedData };\r\n      sortedData.fillers = sortedData.fillers.filter((item, indx) => action.payload !== indx);\r\n      return {\r\n        ...state,\r\n        sortedData,\r\n      };\r\n    }\r\n    case SWAP_CONSTRUCTOR_INGREDIENT: {\r\n      const { dragIndex, hoverIndex } = action.payload;\r\n      const sortedData = { ...state.sortedData };\r\n      sortedData.fillers[dragIndex] = sortedData.fillers.splice(hoverIndex, 1, sortedData.fillers[dragIndex])[0];\r\n      return {\r\n        ...state,\r\n        sortedData,\r\n      };\r\n    }\r\n\r\n    case GET_CONSTRUCTOR_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        data: [...state.data, ...action.payload],\r\n      };\r\n    }\r\n    case RESET_CONSTRUCTOR: {\r\n      return initialState;\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { GET_INGREDIENTS_FAILED, GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_SUCCESS } from \"../action-types\";\r\nimport type { TIngredientsActions } from \"../actions\";\r\nimport type { TIngredient } from \"../types/data\";\r\n\r\ntype TIngredientsState = {\r\n  data: ReadonlyArray<TIngredient>;\r\n  isFetching: boolean;\r\n  fetchingFailed: boolean;\r\n  lastUpdated: number | null;\r\n  error: string | null;\r\n};\r\n\r\nexport const initialState: TIngredientsState = {\r\n  data: [],\r\n  isFetching: false,\r\n  fetchingFailed: false,\r\n  lastUpdated: null,\r\n  error: null,\r\n};\r\n\r\nexport const ingredientsReducer = (state = initialState, action: TIngredientsActions): TIngredientsState => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isFetching: true,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        data: action.payload,\r\n        isFetching: false,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        isFetching: false,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { GET_ORDER_FAILED, GET_ORDER_REQUEST, GET_ORDER_SUCCESS, SET_ORDER_ERROR } from \"../action-types\";\r\nimport type { TOrderActions } from \"../actions\";\r\nimport type { TOrder } from \"../types/data\";\r\n\r\ntype TOrderState = {\r\n  data: TOrder;\r\n  numberOrd: number;\r\n  isFetching: boolean;\r\n  fetchingFailed: boolean;\r\n  lastUpdated: number | null;\r\n  error: string | null;\r\n};\r\n\r\nexport const initialState: TOrderState = {\r\n  data: {} as TOrder,\r\n  numberOrd: 0,\r\n  isFetching: false,\r\n  fetchingFailed: false,\r\n  lastUpdated: null,\r\n  error: null,\r\n};\r\n\r\nexport const orderReducer = (state = initialState, action: TOrderActions): TOrderState => {\r\n  switch (action.type) {\r\n    case GET_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        isFetching: true,\r\n      };\r\n    }\r\n    case GET_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        data: action.payload,\r\n        numberOrd: action.payload.number,\r\n        isFetching: false,\r\n      };\r\n    }\r\n    case GET_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        isFetching: false,\r\n      };\r\n    }\r\n    case SET_ORDER_ERROR: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        error: action.payload,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  GET_AUTH_FAILED,\r\n  GET_AUTH_REQUEST,\r\n  GET_AUTH_SUCCESS,\r\n  GET_PROFILE_FAILED,\r\n  GET_PROFILE_REQUEST,\r\n  GET_PROFILE_SUCCESS,\r\n  GET_REGISTER_FAILED,\r\n  GET_REGISTER_REQUEST,\r\n  GET_REGISTER_SUCCESS,\r\n  SET_AUTH_ERROR,\r\n  SET_PROFILE_CLEAR,\r\n  SET_PROFILE_ERROR,\r\n  SET_REGISTER_ERROR,\r\n} from \"../action-types\";\r\nimport type { TSignActions } from \"../actions\";\r\nimport type { TSignDataWPassword } from \"../types/data\";\r\n\r\ntype TSignState = {\r\n  user: TSignDataWPassword;\r\n  isAuthorized: boolean;\r\n  isFetching: boolean;\r\n  fetchingFailed: boolean;\r\n  lastUpdated: number | null;\r\n  error: string | null;\r\n};\r\n\r\nexport const initialState: TSignState = {\r\n  user: {} as TSignDataWPassword,\r\n  isAuthorized: false,\r\n  isFetching: false,\r\n  fetchingFailed: false,\r\n  lastUpdated: null,\r\n  error: null,\r\n};\r\n\r\nexport const signReduser = (state = initialState, action: TSignActions): TSignState => {\r\n  switch (action.type) {\r\n    case GET_AUTH_REQUEST:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        isAuthorized: false,\r\n        isFetching: true,\r\n      };\r\n\r\n    case GET_AUTH_SUCCESS:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        isAuthorized: true,\r\n        user: action.payload,\r\n        isFetching: false,\r\n      };\r\n\r\n    case GET_AUTH_FAILED:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        isAuthorized: false,\r\n        isFetching: false,\r\n      };\r\n\r\n    case SET_AUTH_ERROR:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        error: action.payload,\r\n      };\r\n\r\n    case GET_REGISTER_REQUEST:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        isAuthorized: false,\r\n        isFetching: true,\r\n      };\r\n\r\n    case GET_REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        isAuthorized: true,\r\n        user: action.payload,\r\n        isFetching: false,\r\n      };\r\n\r\n    case GET_REGISTER_FAILED:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        isAuthorized: false,\r\n        isFetching: false,\r\n      };\r\n\r\n    case SET_REGISTER_ERROR:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        error: action.payload,\r\n      };\r\n\r\n    case GET_PROFILE_REQUEST:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        isFetching: true,\r\n      };\r\n\r\n    case GET_PROFILE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        isAuthorized: true,\r\n        user: action.payload,\r\n        isFetching: false,\r\n      };\r\n\r\n    case GET_PROFILE_FAILED:\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        isAuthorized: false,\r\n        isFetching: false,\r\n      };\r\n\r\n    case SET_PROFILE_ERROR:\r\n      return {\r\n        ...state,\r\n      };\r\n\r\n    case SET_PROFILE_CLEAR:\r\n      return {\r\n        ...state,\r\n        user: initialState.user,\r\n        isAuthorized: false\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { RESET_VIEW_ITEM, SET_VIEW_ITEM } from \"../action-types\";\r\nimport type { TViewedItemActions } from \"../actions\";\r\nimport type { TIngredient } from \"../types/data\";\r\n\r\ntype TViewedItemState = {\r\n  data: TIngredient;\r\n  lastUpdated: number | null;\r\n};\r\n\r\nexport const initialState: TViewedItemState = {\r\n  data: {} as TIngredient,\r\n  lastUpdated: null,\r\n};\r\n\r\nexport const viewedItemReducer = (state = initialState, action: TViewedItemActions): TViewedItemState => {\r\n  switch (action.type) {\r\n    case SET_VIEW_ITEM: {\r\n      return {\r\n        ...state,\r\n        data: action.payload,\r\n      };\r\n    }\r\n\r\n    case RESET_VIEW_ITEM: {\r\n      return {\r\n        ...state,\r\n        data: initialState.data,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  GET_VIEW_ORDER_FAILED,\r\n  GET_VIEW_ORDER_REQUEST,\r\n  GET_VIEW_ORDER_SUCCESS,\r\n  RESET_VIEW_ORDER,\r\n  SET_VIEW_ORDER,\r\n  SET_VIEW_ORDER_ERROR,\r\n} from \"../action-types\";\r\nimport type { TViewedOrderActions } from \"../actions\";\r\nimport type { TViewedOrder } from \"../types/data\";\r\n\r\ntype TViewedOrderState = {\r\n  data: TViewedOrder;\r\n  isLoaded: boolean;\r\n  lastUpdated: number | null;\r\n  isFetching: boolean;\r\n  fetchingFailed: boolean;\r\n  error: string | null;\r\n};\r\n\r\nexport const initialState: TViewedOrderState = {\r\n  data: {} as TViewedOrder,\r\n  isLoaded: false,\r\n  lastUpdated: null,\r\n  isFetching: false,\r\n  fetchingFailed: false,\r\n  error: null,\r\n};\r\n\r\nexport const viewedOrderReducer = (state = initialState, action: TViewedOrderActions): TViewedOrderState => {\r\n  switch (action.type) {\r\n    case SET_VIEW_ORDER: {\r\n      return {\r\n        ...state,\r\n        data: action.payload,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n\r\n    case RESET_VIEW_ORDER: {\r\n      return {\r\n        ...state,\r\n        data: initialState.data,\r\n      };\r\n    }\r\n\r\n    case GET_VIEW_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        isFetching: true,\r\n      };\r\n    }\r\n\r\n    case GET_VIEW_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: false,\r\n        data: action.payload,\r\n        isLoaded: false,\r\n        isFetching: false,\r\n      };\r\n    }\r\n\r\n    case GET_VIEW_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        isFetching: false,\r\n      };\r\n    }\r\n\r\n    case SET_VIEW_ORDER_ERROR: {\r\n      return {\r\n        ...state,\r\n        fetchingFailed: true,\r\n        error: action.payload,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR, WS_CONNECTION_SUCCESS, WS_GET_MESSAGE } from \"../action-types\";\r\nimport type { TWsAllActions } from '../actions';\r\nimport type { TOrderWSAll } from '../types/data';\r\n\r\ntype TWsAllState = {\r\n  wsConnected: boolean;\r\n  data: TOrderWSAll;\r\n  wsConnectionFailed: boolean;\r\n  error: string | null;\r\n}\r\n\r\nexport const initialState: TWsAllState = {\r\n  wsConnected: false,\r\n  data: {} as TOrderWSAll,\r\n  error: null,\r\n  wsConnectionFailed: false\r\n};\r\n\r\nexport const wsAllReducer = (state = initialState, action: TWsAllActions): TWsAllState => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsConnected: true,\r\n        wsConnectionFailed: false,\r\n      };\r\n\r\n    case WS_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        wsConnected: false,\r\n        wsConnectionFailed: true,\r\n      };\r\n\r\n    case WS_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        wsConnected: false,\r\n        wsConnectionFailed: false,\r\n      };\r\n\r\n    case WS_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        data: action.payload,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  WS_SIGN_CONNECTION_CLOSED,\r\n  WS_SIGN_CONNECTION_ERROR,\r\n  WS_SIGN_CONNECTION_SUCCESS,\r\n  WS_SIGN_GET_MESSAGE,\r\n} from \"../action-types\";\r\nimport type { TWsSignActions } from \"../actions\";\r\nimport type { TOrderWSAll } from \"../types/data\";\r\n\r\ntype TWsSignState = {\r\n  wsConnected: boolean;\r\n  data: TOrderWSAll;\r\n  wsConnectionFailed: boolean;\r\n  error: string | null;\r\n};\r\n\r\nexport const initialState: TWsSignState = {\r\n  wsConnected: false,\r\n  data: {} as TOrderWSAll,\r\n  error: null,\r\n  wsConnectionFailed: false,\r\n};\r\nexport const wsSignReducer = (state = initialState, action: TWsSignActions): TWsSignState => {\r\n  switch (action.type) {\r\n    case WS_SIGN_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsConnected: true,\r\n        wsConnectionFailed: false,\r\n      };\r\n\r\n    case WS_SIGN_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        wsConnected: false,\r\n        wsConnectionFailed: true,\r\n      };\r\n\r\n    case WS_SIGN_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        wsConnected: false,\r\n        wsConnectionFailed: false,\r\n      };\r\n\r\n    case WS_SIGN_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        data: action.payload,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport { constructorReducer } from \"./constructorReducers\";\r\nimport { ingredientsReducer } from \"./ingredientsReducers\";\r\nimport { orderReducer } from \"./orderReducers\";\r\nimport { signReduser } from \"./signReducers\";\r\nimport { viewedItemReducer } from \"./viewedItemReducers\";\r\nimport { viewedOrderReducer } from \"./viewedOrderReducers\";\r\nimport { wsAllReducer } from \"./wsAllReducers\";\r\nimport { wsSignReducer } from \"./wsSignReducers\";\r\n\r\nconst rootReducer = combineReducers({\r\n  cart: constructorReducer,\r\n  ingredients: ingredientsReducer,\r\n  order: orderReducer,\r\n  viewedItem: viewedItemReducer,\r\n  sign: signReduser,\r\n  wsAll: wsAllReducer,\r\n  wsSign: wsSignReducer,\r\n  viewedOrder: viewedOrderReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { applyMiddleware,compose, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport { WS_SIGN_URL, WS_URL } from \"../utils/constants\";\r\nimport { socketMiddleware, socketUserMiddleware } from \"./middleware\";\r\nimport rootReducer from \"../redux/reducers\";\r\n\r\nconst composeEnhancers =\r\n  typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\r\n    : compose;\r\nconst enhancer = composeEnhancers(\r\n  applyMiddleware(thunk,\r\n    socketMiddleware(WS_URL),\r\n    socketUserMiddleware(WS_SIGN_URL)\r\n  ));\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import { Middleware, MiddlewareAPI } from \"redux\";\r\n\r\nimport { getToken } from \"../../utils/token\";\r\nimport {\r\n  WS_SIGN_CONNECTION_CLOSED,\r\n  WS_SIGN_CONNECTION_ERROR,\r\n  WS_SIGN_CONNECTION_START,\r\n  WS_SIGN_CONNECTION_STOP,\r\n  WS_SIGN_CONNECTION_SUCCESS,\r\n  WS_SIGN_GET_MESSAGE,\r\n  WS_SIGN_SEND_MESSAGE,\r\n} from \"../action-types\";\r\nimport { wsSignConnectionError } from \"../actions\";\r\n\r\nexport const socketUserMiddleware =\r\n  (wsUrl: string): Middleware =>\r\n  (store: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next) => (action) => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n      const accessToken = getToken();\r\n\r\n      if (type === WS_SIGN_CONNECTION_START) {\r\n        socket = new WebSocket(`${wsUrl}?token=${accessToken}`);\r\n      }\r\n\r\n      if (type === WS_SIGN_CONNECTION_STOP) {\r\n        socket.close(1000, \"Page closed by user\");\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = (event) => {\r\n          dispatch({\r\n            type: WS_SIGN_CONNECTION_SUCCESS,\r\n            payload: event,\r\n          });\r\n        };\r\n\r\n        socket.onerror = (event) => {\r\n          dispatch({\r\n            type: WS_SIGN_CONNECTION_ERROR,\r\n            payload: event,\r\n          });\r\n        };\r\n\r\n        socket.onmessage = (event) => {\r\n          const { data } = event;\r\n          if (data?.includes(\"ping\")) {\r\n            socket.send(\"pong\");\r\n          }\r\n          const { success, message, orders, total, totalToday } = JSON.parse(data);\r\n          if (success) {\r\n            dispatch({\r\n              type: WS_SIGN_GET_MESSAGE,\r\n              payload: {\r\n                orders,\r\n                total,\r\n                totalToday,\r\n              },\r\n            });\r\n          } else {\r\n            message && dispatch(wsSignConnectionError(message));\r\n          }\r\n        };\r\n\r\n        socket.onclose = (event) => {\r\n          dispatch({ type: WS_SIGN_CONNECTION_CLOSED, payload: event });\r\n        };\r\n\r\n        if (type === WS_SIGN_SEND_MESSAGE) {\r\n          socket.send(JSON.stringify(payload));\r\n        }\r\n      }\r\n      next(action);\r\n    };\r\n  };\r\n","import \"./index.css\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport App from \"./components/app/app\";\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { store } from \"./redux/store\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.querySelector(\"#root\")\r\n);\r\n\r\nreportWebVitals();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"sign-login_login__2MplG\",\"input_container\":\"sign-login_input_container__1053a\",\"title\":\"sign-login_title__3D1VE\",\"form\":\"sign-login_form__1jeib\",\"button_container\":\"sign-login_button_container__1huX_\",\"link_container\":\"sign-login_link_container__1WOEM\",\"text\":\"sign-login_text__2Fs1j\",\"link\":\"sign-login_link__37B_X\",\"error_active\":\"sign-login_error_active__wDCwy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_item\":\"orders-card_order_item__1gmyI\",\"order_number\":\"orders-card_order_number__3gYbE\",\"order_info\":\"orders-card_order_info__Cm8zp\",\"done\":\"orders-card_done__2QoMv\",\"ingredients_info\":\"orders-card_ingredients_info__E0THG\",\"ingredients_price\":\"orders-card_ingredients_price__skWDt\",\"ingredients_list\":\"orders-card_ingredients_list__PU5dq\",\"ingredient_wrapper\":\"orders-card_ingredient_wrapper__3XsTd\",\"ingredient\":\"orders-card_ingredient__jZ2SJ\",\"count_wrapper\":\"orders-card_count_wrapper__MG1w1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"sign-forgot-password_login__1at7-\",\"input_container\":\"sign-forgot-password_input_container__1ro4U\",\"title\":\"sign-forgot-password_title__32E61\",\"form\":\"sign-forgot-password_form__3Z5_C\",\"button_container\":\"sign-forgot-password_button_container__1ZziR\",\"link_container\":\"sign-forgot-password_link_container__3GSgt\",\"text\":\"sign-forgot-password_text__2DBIh\",\"link\":\"sign-forgot-password_link__1DA9s\",\"error_active\":\"sign-forgot-password_error_active__3O7nl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"sign-register_login__19Jz7\",\"input_container\":\"sign-register_input_container__1lQil\",\"title\":\"sign-register_title__1v_kr\",\"form\":\"sign-register_form__1k3Tt\",\"button_container\":\"sign-register_button_container__2_rG7\",\"link_container\":\"sign-register_link_container__3kFtG\",\"text\":\"sign-register_text__3hGcl\",\"link\":\"sign-register_link__2OQ_r\",\"error_active\":\"sign-register_error_active__3cxEI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"sign-reset-password_login__1og4V\",\"input_container\":\"sign-reset-password_input_container__1foo2\",\"title\":\"sign-reset-password_title__3TK5h\",\"form\":\"sign-reset-password_form__2saAJ\",\"button_container\":\"sign-reset-password_button_container__StYPs\",\"link_container\":\"sign-reset-password_link_container__RYk1b\",\"text\":\"sign-reset-password_text__vBfGG\",\"link\":\"sign-reset-password_link__WLEwp\",\"error_active\":\"sign-reset-password_error_active__1KRIm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu_link\":\"sign-profile-nav_menu_link__1dQyw\",\"menu_link_active\":\"sign-profile-nav_menu_link_active__1RihR\",\"nav_list\":\"sign-profile-nav_nav_list__YrNN8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page404\":\"page-404_page404__3TDhr\",\"container\":\"page-404_container__b3wR4\",\"title\":\"page-404_title__2JsT1\",\"text\":\"page-404_text__2vXC4\",\"num\":\"page-404_num__3b_x5\",\"link\":\"page-404_link__15BJI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"page-feed-card_wrapper__3cAbF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"app-header_container__dg7oJ\",\"menu\":\"app-header_menu__pvWY3\",\"menu_right\":\"app-header_menu_right__2LSJ6\",\"menu_link\":\"app-header_menu_link__2AjhK\",\"logo\":\"app-header_logo__2S7FZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__3m4g6\",\"scroll_list\":\"burger-constructor_scroll_list__1TUwF\",\"item_list\":\"burger-constructor_item_list__3ZcFi\",\"checkout_container\":\"burger-constructor_checkout_container__chMEp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-ingredient_item__2Eweg\",\"item_image\":\"burger-ingredient_item_image__1ot4t\",\"item_description\":\"burger-ingredient_item_description___SlRu\",\"item_name\":\"burger-ingredient_item_name__3OWYq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"page-profile_profile__1EkIJ\",\"nav_container\":\"page-profile_nav_container__1QFSE\",\"nav__text\":\"page-profile_nav__text__3pq5M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"page-order-history_wrapper__XL8L3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu_link\":\"menu-item_menu_link__3lcuF\",\"menu_link_active\":\"menu-item_menu_link_active__UErFm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-constructor-item-swap_item__1UV2c\",\"item_elem\":\"burger-constructor-item-swap_item_elem__2qya1\",\"drag_icon\":\"burger-constructor-item-swap_drag_icon__Jin08\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-details_container__1wd87\",\"details_list\":\"ingredient-details_details_list__12j2T\",\"details_list_item\":\"ingredient-details_details_list_item__1Z_zX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1h5My\",\"header\":\"modal_header__3Y63R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"sign-profile_profile__eXsD-\",\"nav_container\":\"sign-profile_nav_container__H9RiE\",\"nav__text\":\"sign-profile_nav__text__zvTSd\",\"form\":\"sign-profile_form__1MTsP\",\"button_container\":\"sign-profile_button_container__3NwkI\",\"error\":\"sign-profile_error__pmjBe\",\"error_active\":\"sign-profile_error_active__20e35\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"page-ingredient_wrapper__DzgNi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"page-main_wrapper__2vjUY\",\"nav_panel\":\"page-main_nav_panel__1m7C4\",\"main\":\"page-main_main__1RTnM\"};"],"sourceRoot":""}